function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{pi15:function(e,t,n){"use strict";n.r(t),n.d(t,"WelcomePageModule",(function(){return D}));var r=n("ofXK"),i=n("3Pt+"),a=n("TEn/"),o=n("tyNb"),c=n("mrSG"),l=n("z6cu"),s=n("JIr8"),b=n("AytR"),u=n("sV9K"),g=n("MO+k"),f=n("wd/R"),p=n("NEhk"),d=n("qb46"),h=n.n(d),m=n("fXoL"),v=n("sYmb"),y=n("tk/3"),P=n("e8h1"),w=["lineCanvas"];function C(e,t){1&e&&(m.Qb(0,"h1"),m.wc(1,"Achievements"),m.Pb())}function O(e,t){if(1&e&&(m.Qb(0,"div"),m.Qb(1,"h5"),m.wc(2),m.bc(3,"translate"),m.Mb(4,"br"),m.wc(5),m.Pb(),m.Mb(6,"ion-progress-bar",14),m.Qb(7,"p"),m.wc(8),m.bc(9,"translate"),m.Pb(),m.Pb()),2&e){var n=m.ac().$implicit;m.Bb(2),m.yc("",m.cc(3,6,"welcome."+n.levelInfo.translationKey+"_title")," "),m.Bb(3),m.yc(" Level ",n.levelInfo.level,""),m.Bb(1),m.hc("value",n.levelInfo.progress/n.levelInfo.target),m.Bb(2),m.Ac("",m.cc(9,8,"welcome."+n.levelInfo.translationKey+"_description")," (",n.levelInfo.progress,"/",n.levelInfo.target,")")}}function _(e,t){if(1&e&&(m.Qb(0,"div"),m.Qb(1,"h5"),m.wc(2),m.bc(3,"translate"),m.Pb(),m.Qb(4,"p"),m.wc(5),m.bc(6,"translate"),m.Pb(),m.Pb()),2&e){var n=m.ac().$implicit;m.Bb(2),m.Bc("",n.tournamentInfo.rank,". ",m.cc(3,5,"welcome.at")," ",n.tournamentInfo.name," ",n.tournamentInfo.year,""),m.Bb(3),m.yc(" ",m.cc(6,7,"welcome.tournament_achievement_description"),"")}}function I(e,t){if(1&e&&(m.Qb(0,"div"),m.Qb(1,"h5"),m.wc(2),m.Pb(),m.Qb(3,"p"),m.wc(4),m.Pb(),m.Pb()),2&e){var n=m.ac().$implicit;m.Bb(2),m.xc(n.customInfo.title),m.Bb(2),m.yc(" ",n.customInfo.description,"")}}function k(e,t){if(1&e&&(m.Qb(0,"ion-slide"),m.Qb(1,"div",10),m.Qb(2,"div",11),m.Mb(3,"img",12),m.Pb(),m.Qb(4,"div",13),m.uc(5,O,10,10,"div",4),m.uc(6,_,7,9,"div",4),m.uc(7,I,5,2,"div",4),m.Pb(),m.Pb(),m.Pb()),2&e){var n=t.$implicit;m.Bb(3),m.ic("src","../../assets/icon/achievements/",n.icon,".svg",m.rc),m.Bb(2),m.gc("ngIf",n.isLevelAchievement),m.Bb(1),m.gc("ngIf",n.isTournamentAchievement),m.Bb(1),m.gc("ngIf",n.isCustomAchievement)}}function M(e,t){if(1&e){var n=m.Rb();m.Qb(0,"ion-item-sliding"),m.Qb(1,"ion-item",15),m.Yb("click",(function(){m.pc(n);var e=t.index,r=m.ac(2);return r.openTip(r.lineChart,0,r.loggedInUser.elo.length-e-1)})),m.Qb(2,"ion-label",16),m.Qb(3,"div",17),m.Qb(4,"p",18),m.wc(5),m.Pb(),m.Qb(6,"p"),m.wc(7),m.Pb(),m.Qb(8,"p"),m.wc(9),m.Pb(),m.Pb(),m.Qb(10,"div",19),m.Qb(11,"p",18),m.wc(12),m.Pb(),m.Qb(13,"p"),m.wc(14),m.Pb(),m.Qb(15,"p"),m.wc(16),m.Pb(),m.Pb(),m.Pb(),m.Pb(),m.Qb(17,"ion-item-options",20),m.Qb(18,"button",21),m.Yb("click",(function(){m.pc(n);var e=t.$implicit;return m.ac(2).presentDeleteAlert(e)})),m.Mb(19,"ion-icon",22),m.Pb(),m.Pb(),m.Pb()}if(2&e){var r=t.$implicit;m.Bb(4),m.gc("ngClass",null!=r&&r.isWon?"primary":""),m.Bb(1),m.xc(null==r?null:r.finalScore.team1),m.Bb(2),m.xc(null==r?null:r.playerNames[0]),m.Bb(2),m.xc(null==r?null:r.playerNames[1]),m.Bb(2),m.gc("ngClass",null!=r&&r.isWon?"primary":""),m.Bb(1),m.xc(null==r?null:r.finalScore.team2),m.Bb(2),m.xc(null==r?null:r.playerNames[2]),m.Bb(2),m.xc(null==r?null:r.playerNames[3])}}function Q(e,t){if(1&e&&(m.Qb(0,"div",3),m.uc(1,C,2,0,"h1",4),m.Qb(2,"ion-card"),m.Qb(3,"ion-card-header",5),m.Qb(4,"ion-slides",6),m.uc(5,k,8,4,"ion-slide",7),m.Pb(),m.Pb(),m.Pb(),m.Qb(6,"h1"),m.wc(7),m.bc(8,"translate"),m.Pb(),m.Qb(9,"ion-card"),m.Qb(10,"ion-card-header"),m.Qb(11,"div",8),m.Mb(12,"canvas",null,9),m.Pb(),m.Pb(),m.Qb(14,"ion-card-content"),m.Qb(15,"ion-list"),m.uc(16,M,20,8,"ion-item-sliding",7),m.Pb(),m.Pb(),m.Pb(),m.Pb()),2&e){var n=m.ac();m.Bb(1),m.gc("ngIf",n.achievements&&n.achievements.length>0),m.Bb(4),m.gc("ngForOf",n.achievements),m.Bb(2),m.xc(m.cc(8,4,"welcome.rating")),m.Bb(9),m.gc("ngForOf",n.gameOverview)}}var B=function(){return["/tabs/newGame"]};function A(e,t){1&e&&(m.Qb(0,"div",23),m.Mb(1,"img",24),m.Qb(2,"ion-card-title"),m.wc(3),m.bc(4,"translate"),m.Pb(),m.Qb(5,"ul"),m.Qb(6,"li"),m.wc(7),m.bc(8,"translate"),m.Pb(),m.Mb(9,"br"),m.Qb(10,"li"),m.wc(11),m.bc(12,"translate"),m.Pb(),m.Pb(),m.Qb(13,"ion-button",25),m.wc(14),m.bc(15,"translate"),m.Pb(),m.Pb()),2&e&&(m.Bb(3),m.xc(m.cc(4,5,"welcome.no_games_title")),m.Bb(4),m.xc(m.cc(8,7,"welcome.explainer_2")),m.Bb(4),m.xc(m.cc(12,9,"welcome.explainer_3")),m.Bb(2),m.gc("routerLink",m.jc(13,B)),m.Bb(1),m.yc(" ",m.cc(15,11,"welcome.start_game"),""))}var x,L,j,S=[{path:"",component:(x=function(){function e(t,n,r,i,a,c,l,s){var b=this;_classCallCheck(this,e),this.alertController=t,this.translator=n,this.toastService=r,this.modalController=i,this.httpClient=a,this.storage=c,this.authService=l,this.router=s,this.hasGames=!0,this.router.events.subscribe((function(e){b.hasGames=!0,e instanceof o.c&&"/tabs/welcome"===e.url&&(b.APIgetAchievements().subscribe((function(e){b.achievements=e})),b.APIgetGameOverview().subscribe((function(e){0!==e.length?(b.gameOverview=e,b.gameOverview=b.formateDate(b.gameOverview),b.APIgetLoggedInUser().subscribe((function(e){b.loggedInUser=e,b.updateGraph(b.loggedInUser.elo)}))):b.hasGames=!1})))}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;g.Chart.plugins.unregister(h.a),this.hasGames=!0,this.APIgetAchievements().subscribe((function(t){e.achievements=t})),this.APIgetGameOverview().subscribe((function(t){0!==t.length?(e.gameOverview=t,e.gameOverview=e.formateDate(e.gameOverview),e.APIgetLoggedInUser().subscribe((function(t){e.loggedInUser=t,e.startGraph(e.loggedInUser.elo)}))):e.hasGames=!1}))}},{key:"presentDeleteAlert",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:this.translator.instant("welcome.delete_alert_header"),message:this.translator.instant("welcome.delete_alert_message"),buttons:[{text:this.translator.instant("welcome.cancel"),role:"cancel"},{text:this.translator.instant("welcome.send"),handler:function(){r.APIsendDeleteGameEmail(JSON.stringify(e)).subscribe((function(){r.toastService.presentToast("Request sent!")}))}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"formateDate",value:function(e){var t,n=e,r=_createForOfIteratorHelper(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.date=f(i.date).format("DD.MM.YYYY")}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"updateGraph",value:function(e){var t,n=[],r=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(a.ranking),r.push(f(a.date).format("DD.MM.YYYY"))}}catch(o){i.e(o)}finally{i.f()}this.lineChart.data.datasets[0].data=n,this.lineChart.data.labels=r,this.lineChart.update()}},{key:"startGraph",value:function(e){var t,n=[],r=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(a.ranking),r.push(f(a.date).format("DD.MM.YYYY"))}}catch(o){i.e(o)}finally{i.f()}this.lineChart=new g.Chart(this.lineCanvas.nativeElement,{type:"line",data:{labels:r,datasets:[{fill:!0,lineTension:.1,borderColor:"#eb711b",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"#eb711b",pointBackgroundColor:"#eb711b",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"#ffffff",pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:n,spanGaps:!1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{ticks:{display:!1},gridLines:{color:"rgba(255, 255, 255, 0.2)",lineWidth:.5,drawBorder:!1}}],yAxes:[{ticks:{stepSize:50,fontColor:"rgba(255, 255, 255, 0.8)"},gridLines:{color:"rgba(255, 255, 255, 0.9)",lineWidth:.7,drawBorder:!1}}]},legend:{display:!1},tooltips:{enabled:!0,titleFontFamily:"Raleway",bodyFontFamily:"Raleway",displayColors:!1}}})}},{key:"openTip",value:function(e,t,n){e.tooltip._active=[];for(var r=e.tooltip._active,i=e.getDatasetMeta(t).data[n],a=0;a<r.length;a++)if(i._index===r[a]._index)return;r.push(i),e.tooltip._active=r,e.tooltip.update(!0),e.draw()}},{key:"APIgetGameOverview",value:function(){var e=this;return this.httpClient.get(b.b+"/users/getGameOverview").pipe(Object(s.a)((function(t){return e.toastService.presentToast(),Object(l.a)(t)})))}},{key:"APIgetLoggedInUser",value:function(){var e=this;return this.httpClient.get(b.b+"/users/loggedInUser").pipe(Object(s.a)((function(t){return e.toastService.presentToast(),Object(l.a)(t)})))}},{key:"APIdeleteGameFromDb",value:function(e){var t=this;return this.httpClient.delete("".concat(b.b,"/games/").concat(e)).pipe(Object(s.a)((function(e){return t.toastService.presentToast(),Object(l.a)(e)})))}},{key:"APIsendDeleteGameEmail",value:function(e){var t=this;return this.httpClient.post(b.b+"/games/sendDeleteGameEmail",{gameId:e}).pipe(Object(s.a)((function(e){return t.toastService.presentToast(),Object(l.a)(e)})))}},{key:"APIgetAchievements",value:function(){var e=this;return this.httpClient.get(b.b+"/users/achievements").pipe(Object(s.a)((function(t){return e.toastService.presentToast(),Object(l.a)(t)})))}},{key:"setDetailsToShow",value:function(e){this.details=e}}]),e}(),x.\u0275fac=function(e){return new(e||x)(m.Lb(a.a),m.Lb(v.d),m.Lb(p.a),m.Lb(a.S),m.Lb(y.b),m.Lb(P.b),m.Lb(u.a),m.Lb(o.h))},x.\u0275cmp=m.Fb({type:x,selectors:[["app-welcome"]],viewQuery:function(e,t){var n;1&e&&m.Cc(w,!0),2&e&&m.mc(n=m.Zb())&&(t.lineCanvas=n.first)},decls:4,vars:2,consts:[[1,"top-spacer"],["class","full-height",4,"ngIf"],["class","horizontal-margin top-space",4,"ngIf"],[1,"full-height"],[4,"ngIf"],[1,"no-padding"],["pager","true"],[4,"ngFor","ngForOf"],[1,"canvas-wrapper"],["lineCanvas",""],[1,"achievement-details"],[1,"left"],["alt","",3,"src"],[1,"right"],["color","primary",3,"value"],["lines","inset","detail","false",3,"click"],[1,"verticalLine"],[1,"leftOfLine"],[3,"ngClass"],[1,"rightOfLine"],["side","end",1,"trash-slider"],["ion-button","","color","danger",1,"slide-button",3,"click"],["name","trash"],[1,"horizontal-margin","top-space"],["src","../../assets/pictures/dragon_icon_login.png","alt",""],["expand","block",3,"routerLink"]],template:function(e,t){1&e&&(m.Qb(0,"ion-content"),m.Mb(1,"div",0),m.uc(2,Q,17,6,"div",1),m.uc(3,A,16,14,"div",2),m.Pb()),2&e&&(m.Bb(2),m.gc("ngIf",t.hasGames),m.Bb(1),m.gc("ngIf",!t.hasGames))},directives:[a.p,r.j,a.h,a.j,a.J,r.i,a.i,a.y,a.I,a.A,a.w,a.u,a.x,r.h,a.v,a.s,a.l,a.f,a.W,o.i],pipes:[v.c],styles:["ion-content[_ngcontent-%COMP%]::part(background){background:url(dragon.9e494a4c9b27622c5466.png) no-repeat 0 0 fixed;background-size:cover}ion-content[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-background)}ion-item[_ngcontent-%COMP%]{border-radius:0 0 0 0}.top-space[_ngcontent-%COMP%]{margin-top:10vh}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{position:relative;text-align:left;vertical-align:center!important;margin:0 0 0 5%}.trash-slider[_ngcontent-%COMP%]{margin-right:2%;max-height:80%;margin-top:2%}ion-card[_ngcontent-%COMP%]{margin-top:1vh;margin-bottom:3vh}.full-height[_ngcontent-%COMP%]{height:95%!important}.scrolling[_ngcontent-%COMP%]{overflow-y:auto!important;max-height:45vh}.canvas-wrapper[_ngcontent-%COMP%]{position:relative;height:22vh}.no-padding[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.primary[_ngcontent-%COMP%]{color:var(--ion-color-primary)!important}.slide-button[_ngcontent-%COMP%]{width:15vw;background-color:var(--ion-color-primary);font-size:1.4rem;color:#fff}p[_ngcontent-%COMP%]{color:#fff}img[_ngcontent-%COMP%]{width:30%;display:block;margin-left:auto;margin-right:auto}ion-card-title[_ngcontent-%COMP%]{text-align:center}ion-progress-bar[_ngcontent-%COMP%]{--buffer-background:#fff}ul[_ngcontent-%COMP%]{margin-left:5%;margin-right:2%}li[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{color:#fff;-webkit-padding-start:0;padding-inline-start:0;text-align:justify}.achievement-header[_ngcontent-%COMP%]{margin:0!important;padding:0!important}.achievement-details[_ngcontent-%COMP%]{margin-bottom:10%;margin-top:10%;display:flex!important;color:#000;width:100%;flex-direction:row;align-items:center}.achievement-details[_ngcontent-%COMP%]   div.left[_ngcontent-%COMP%]{width:30%}.achievement-details[_ngcontent-%COMP%]   div.left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:20%;margin-bottom:20%;height:60%;width:100%}.achievement-details[_ngcontent-%COMP%]   div.right[_ngcontent-%COMP%]{margin-left:10%;width:70%;font-size:.8rem}"]}),x)}],G=((j=function e(){_classCallCheck(this,e)}).\u0275mod=m.Jb({type:j}),j.\u0275inj=m.Ib({factory:function(e){return new(e||j)},imports:[[o.j.forChild(S)],o.j]}),j),D=((L=function e(){_classCallCheck(this,e)}).\u0275mod=m.Jb({type:L}),L.\u0275inj=m.Ib({factory:function(e){return new(e||L)},providers:[],imports:[[r.b,i.a,a.Q,G,v.b.forChild()]]}),L)}}]);
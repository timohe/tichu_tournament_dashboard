(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{B028:function(t,e,i){"use strict";i.r(e),i.d(e,"NewGamePageModule",(function(){return xe}));var n=i("ofXK"),r=i("3Pt+"),s=i("TEn/"),c=i("sYmb"),a=i("tyNb"),o=i("mrSG"),l=(i("t4lL"),i("z6cu")),u=i("JIr8"),d=i("OYNw"),h=i("AytR"),b=i("NEhk"),m=i("MO+k"),g=i("qb46"),f=i.n(g),p=i("fXoL"),v=i("tk/3");const _=["lineCanvas"],P=function(t,e,i){return{name1:t,name2:e,difference:i}};function y(t,e){if(1&t&&(p.Qb(0,"h5"),p.wc(1),p.bc(2,"translate"),p.Pb()),2&t){const t=p.ac();p.Bb(1),p.xc(p.dc(2,1,"game.summary_team_ahead",p.lc(4,P,null==t.currentGame?null:t.currentGame.players[0].name,null==t.currentGame?null:t.currentGame.players[1].name,t.scoresTeam1[t.scoresTeam1.length-1]-t.scoresTeam2[t.scoresTeam2.length-1])))}}function k(t,e){if(1&t&&(p.Qb(0,"h5"),p.wc(1),p.bc(2,"translate"),p.Pb()),2&t){const t=p.ac();p.Bb(1),p.xc(p.dc(2,1,"game.summary_team_ahead",p.lc(4,P,null==t.currentGame?null:t.currentGame.players[2].name,null==t.currentGame?null:t.currentGame.players[3].name,t.scoresTeam2[t.scoresTeam2.length-1]-t.scoresTeam1[t.scoresTeam1.length-1])))}}function I(t,e){1&t&&(p.Qb(0,"h5"),p.wc(1),p.bc(2,"translate"),p.Pb()),2&t&&(p.Bb(1),p.xc(p.cc(2,1,"game.summary_draw")))}function x(t,e){1&t&&(p.Qb(0,"h5"),p.wc(1),p.bc(2,"translate"),p.Pb()),2&t&&(p.Bb(1),p.xc(p.cc(2,1,"game.summary_no_rounds")))}let w=(()=>{class t{constructor(t,e,i,n,r){this.translator=t,this.alertController=e,this.toastService=i,this.modalController=n,this.httpClient=r,this.refreshRequired=!1,this.deleteRoundButtonBlocked=!1,this.scoresTeam1=[0],this.scoresTeam2=[0]}ngOnInit(){m.Chart.plugins.unregister(f.a),this.APIgetGameSummary().subscribe(t=>{this.gameSummary=t,t.forEach(t=>{this.scoresTeam1.push(t.newScore[0]),this.scoresTeam2.push(t.newScore[3])}),this.createBarChart(this.scoresTeam1,this.scoresTeam2)})}deleteLastRound(){this.deleteRoundButtonBlocked=!0,this.APIdeleteLastRound().subscribe(()=>{console.log("deleted last Round"),this.refreshRequired=!0,this.APIgetGameSummary().subscribe(t=>{this.gameSummary=t,this.deleteRoundButtonBlocked=!1,this.scoresTeam1=[0],this.scoresTeam2=[0],t.forEach(t=>{this.scoresTeam1.push(t.newScore[0]),this.scoresTeam2.push(t.newScore[3])}),this.createBarChart(this.scoresTeam1,this.scoresTeam2)})})}showAreYouSureYouWantToDelete(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:this.translator.instant("game.delete_are_you_sure_header"),message:this.translator.instant("game.delete_are_you_sure_message"),buttons:[{text:this.translator.instant("game.cancel"),role:"cancel",cssClass:"secondary",handler:t=>{}},{text:this.translator.instant("game.delete"),handler:()=>{this.APIdeleteGame().subscribe(t=>{}),this.refreshRequired=!0,this.closeModal()}}]});yield t.present()}))}closeModal(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.modalController.dismiss(this.refreshRequired)}))}createBarChart(t,e){this.lineChart=new m.Chart(this.lineCanvas.nativeElement,{plugins:[f.a],type:"line",data:{labels:Array.from(Array(t.length).keys()),datasets:[{data:t,borderColor:"#1e2144",fill:!1},{data:e,borderColor:"#eb711b",fill:!1}]},options:{plugins:{datalabels:{font:{family:"Raleway",size:14,weight:"bold"},anchor:"start",backgroundColor:"#e6e3d9",borderRadius:16,display:"auto"}},responsive:!0,maintainAspectRatio:!1,title:{display:!1},legend:{display:!1,position:"bottom",labels:{fontFamily:"Raleway"}},scales:{xAxes:[{gridLines:{display:!0},ticks:{display:!1}}],yAxes:[{gridLines:{display:!0},ticks:{stepSize:200,display:!1}}]},tooltips:{enabled:!1},layout:{padding:{left:10,right:25,top:10,bottom:10}}}})}APIgetGameSummary(){return this.httpClient.get(`${h.b}/games/getGameSummary/${this.currentGame._id}`).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIdeleteGame(){return this.httpClient.delete(`${h.b}/games/${this.currentGame._id}`).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIdeleteLastRound(){return this.httpClient.delete(`${h.b}/games/round/${this.currentGame._id}`).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}}return t.\u0275fac=function(e){return new(e||t)(p.Lb(c.d),p.Lb(s.a),p.Lb(b.a),p.Lb(s.S),p.Lb(v.b))},t.\u0275cmp=p.Fb({type:t,selectors:[["app-new-game-summary-modal"]],viewQuery:function(t,e){var i;1&t&&p.Cc(_,!0),2&t&&p.mc(i=p.Zb())&&(e.lineCanvas=i.first)},inputs:{currentGame:"currentGame"},decls:24,vars:15,consts:[[1,"styled-modal"],[1,"inner-content"],[1,"bottom"],[4,"ngIf"],[1,"graph-container"],["lineCanvas",""],["col-6",""],["expand","full",3,"disabled","click"],["slot","end","name","trash-outline"],["expand","full",1,"button-divider",3,"disabled","click"]],template:function(t,e){1&t&&(p.Qb(0,"div",0),p.Qb(1,"div",1),p.Qb(2,"h5"),p.wc(3),p.bc(4,"translate"),p.Pb(),p.Qb(5,"div",2),p.uc(6,y,3,8,"h5",3),p.uc(7,k,3,8,"h5",3),p.uc(8,I,3,3,"h5",3),p.uc(9,x,3,3,"h5",3),p.Qb(10,"div",4),p.Mb(11,"canvas",null,5),p.Pb(),p.Pb(),p.Qb(13,"ion-row"),p.Qb(14,"ion-col",6),p.Qb(15,"ion-button",7),p.Yb("click",(function(){return e.deleteLastRound()})),p.wc(16),p.bc(17,"translate"),p.Mb(18,"ion-icon",8),p.Pb(),p.Pb(),p.Qb(19,"ion-col",6),p.Qb(20,"ion-button",9),p.Yb("click",(function(){return e.showAreYouSureYouWantToDelete()})),p.wc(21),p.bc(22,"translate"),p.Mb(23,"ion-icon",8),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb()),2&t&&(p.Bb(3),p.xc(p.cc(4,9,"game.current_game")),p.Bb(3),p.gc("ngIf",e.scoresTeam1[e.scoresTeam1.length-1]-e.scoresTeam2[e.scoresTeam2.length-1]>0),p.Bb(1),p.gc("ngIf",e.scoresTeam1[e.scoresTeam1.length-1]-e.scoresTeam2[e.scoresTeam2.length-1]<0),p.Bb(1),p.gc("ngIf",e.scoresTeam1.length>1&&e.scoresTeam1[e.scoresTeam1.length-1]-e.scoresTeam2[e.scoresTeam2.length-1]==0),p.Bb(1),p.gc("ngIf",e.scoresTeam1.length<2),p.Bb(6),p.gc("disabled",e.deleteRoundButtonBlocked),p.Bb(1),p.yc(" ",p.cc(17,11,"game.delete_last_round")," "),p.Bb(4),p.gc("disabled",e.currentGame.tournamentId),p.Bb(1),p.yc(" ",p.cc(22,13,"game.delete_game")," "))},directives:[n.j,s.E,s.o,s.f,s.s],pipes:[c.c],styles:["img.icon[_ngcontent-%COMP%]{height:1.8rem;width:1.8rem}ion-label.lastLabel[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-grid.whiteBackground[_ngcontent-%COMP%]{background-color:#fff;margin-top:1.5em}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}ul[_ngcontent-%COMP%]   li.left[_ngcontent-%COMP%]{padding-right:1rem}ul[_ngcontent-%COMP%]   li.right[_ngcontent-%COMP%]{padding-left:1rem}.bottom[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:1rem 3rem 0;color:#000}.graph-container[_ngcontent-%COMP%]{position:relative;padding:0 2rem 2vh;height:35vh!important}"]}),t})();var R=i("dEu6"),G=i("3+Bf"),O=i("j14s"),B=i("R1ws"),S=i("quSY"),C=i("jhN1"),T=i("tkJt"),M=i("FWMu");const Q=["sliderWrapper"],A={provide:r.c,useExisting:Object(p.T)(()=>D),multi:!0};class j{}class Y{constructor(t){this._elementRef=t}}const F=Object(O.h)(Object(O.e)(Object(O.g)(Y),"accent"));let D=(()=>{class t extends F{constructor(t,e,i,n,r,s){super(t),this._focusMonitor=e,this._changeDetectorRef=i,this._dir=n,this._animationMode=s,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new p.n,this.input=new p.n,this.valueChange=new p.n,this.onTouched=()=>{},this._percent=0,this._isSliding=!1,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=S.a.EMPTY,this.tabIndex=parseInt(r)||0}get invert(){return this._invert}set invert(t){this._invert=Object(R.a)(t)}get max(){return this._max}set max(t){this._max=Object(R.c)(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=Object(R.c)(t,this._min),null===this._value&&(this.value=this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=Object(R.c)(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=Object(R.a)(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?Object(R.c)(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let e=Object(R.c)(t);this._roundToDecimal&&(e=parseFloat(e.toFixed(this._roundToDecimal))),this._value=e,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=Object(R.a)(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}get _invertAxis(){return this.vertical?!this.invert:this.invert}get _isMinValue(){return 0===this.percent}get _thumbGap(){return this.disabled?7:this._isMinValue&&!this.thumbLabel?this._isActive?10:7:0}get _trackBackgroundStyles(){const t=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._thumbGap}px) scale3d(${t})`}}get _trackFillStyles(){const t=this.vertical?`1, ${this.percent}, 1`:this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._thumbGap}px) scale3d(${t})`}}get _ticksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}get _ticksStyles(){let t=100*this._tickIntervalPercent,e={backgroundSize:this.vertical?`2px ${t}%`:t+"% 2px",transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};return this._isMinValue&&this._thumbGap&&(e["padding"+(this.vertical?this._invertAxis?"Bottom":"Top":this._invertAxis?"Right":"Left")]=this._thumbGap+"px"),e}get _thumbContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?this._invertAxis:!this._invertAxis)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){return"rtl"!=this._getDirection()||this.vertical?this._invertAxis:!this._invertAxis}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngOnInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onMousedown(t){if(this.disabled||0!==t.button)return;const e=this.value;this._isSliding=!1,this._focusHostElement(),this._updateValueFromPosition({x:t.clientX,y:t.clientY}),e!=this.value&&(this._emitInputEvent(),this._emitChangeEvent())}_onSlide(t){if(this.disabled)return;this._isSliding||this._onSlideStart(null),t.preventDefault();let e=this.value;this._updateValueFromPosition({x:t.center.x,y:t.center.y}),e!=this.value&&this._emitInputEvent()}_onSlideStart(t){this.disabled||this._isSliding||(this._onMouseenter(),this._isSliding=!0,this._focusHostElement(),this._valueOnSlideStart=this.value,t&&(this._updateValueFromPosition({x:t.center.x,y:t.center.y}),t.preventDefault()))}_onSlideEnd(){this._isSliding=!1,this._valueOnSlideStart==this.value||this.disabled||this._emitChangeEvent(),this._valueOnSlideStart=null}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||Object(G.p)(t))return;const e=this.value;switch(t.keyCode){case G.i:this._increment(10);break;case G.h:this._increment(-10);break;case G.c:this.value=this.max;break;case G.e:this.value=this.min;break;case G.f:this._increment("rtl"==this._getDirection()?1:-1);break;case G.m:this._increment(1);break;case G.j:this._increment("rtl"==this._getDirection()?-1:1);break;case G.b:this._increment(-1);break;default:return}e!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding=!0,t.preventDefault()}_onKeyup(){this._isSliding=!1}_increment(t){this.value=this._clamp((this.value||0)+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let e=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(e=1-e),0===e)this.value=this.min;else if(1===e)this.value=this.max;else{const t=this._calculateValue(e),i=Math.round((t-this.min)/this.step)*this.step+this.min;this.value=this._clamp(i,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(this.tickInterval&&this._sliderDimensions)if("auto"==this.tickInterval){let t=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,e=Math.ceil(30/(t*this.step/(this.max-this.min)));this._tickIntervalPercent=e*this.step/t}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)}_createChangeEvent(t=this.value){let e=new j;return e.source=this,e.value=t,e}_calculatePercentage(t){return((t||0)-this.min)/(this.max-this.min)}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,e=0,i=1){return Math.max(e,Math.min(t,i))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return t.\u0275fac=function(e){return new(e||t)(p.Lb(p.l),p.Lb(T.a),p.Lb(p.h),p.Lb(M.b,8),p.Vb("tabindex"),p.Lb(B.a,8))},t.\u0275cmp=p.Fb({type:t,selectors:[["mat-slider"]],viewQuery:function(t,e){var i;1&t&&p.Cc(Q,!0),2&t&&p.mc(i=p.Zb())&&(e._sliderWrapper=i.first)},hostAttrs:["role","slider",1,"mat-slider"],hostVars:28,hostBindings:function(t,e){1&t&&p.Yb("focus",(function(){return e._onFocus()}))("blur",(function(){return e._onBlur()}))("mousedown",(function(t){return e._onMousedown(t)}))("keydown",(function(t){return e._onKeydown(t)}))("keyup",(function(){return e._onKeyup()}))("mouseenter",(function(){return e._onMouseenter()}))("slide",(function(t){return e._onSlide(t)}))("slideend",(function(){return e._onSlideEnd()}))("slidestart",(function(t){return e._onSlideStart(t)}))("selectstart",(function(t){return t.preventDefault()})),2&t&&(p.Tb("tabIndex",e.tabIndex),p.Cb("aria-disabled",e.disabled)("aria-valuemax",e.max)("aria-valuemin",e.min)("aria-valuenow",e.value)("aria-orientation",e.vertical?"vertical":"horizontal"),p.Db("mat-slider-disabled",e.disabled)("mat-slider-has-ticks",e.tickInterval)("mat-slider-horizontal",!e.vertical)("mat-slider-axis-inverted",e._invertAxis)("mat-slider-invert-mouse-coords",e._shouldInvertMouseCoords())("mat-slider-sliding",e._isSliding)("mat-slider-thumb-label-showing",e.thumbLabel)("mat-slider-vertical",e.vertical)("mat-slider-min-value",e._isMinValue)("mat-slider-hide-last-tick",e.disabled||e._isMinValue&&e._thumbGap&&e._invertAxis)("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",value:"value",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",vertical:"vertical",displayWith:"displayWith"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[p.Ab([A]),p.yb],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,e){1&t&&(p.Qb(0,"div",0,1),p.Qb(2,"div",2),p.Mb(3,"div",3),p.Mb(4,"div",4),p.Pb(),p.Qb(5,"div",5),p.Mb(6,"div",6),p.Pb(),p.Qb(7,"div",7),p.Mb(8,"div",8),p.Mb(9,"div",9),p.Qb(10,"div",10),p.Qb(11,"span",11),p.wc(12),p.Pb(),p.Pb(),p.Pb(),p.Pb()),2&t&&(p.Bb(3),p.gc("ngStyle",e._trackBackgroundStyles),p.Bb(1),p.gc("ngStyle",e._trackFillStyles),p.Bb(1),p.gc("ngStyle",e._ticksContainerStyles),p.Bb(1),p.gc("ngStyle",e._ticksStyles),p.Bb(1),p.gc("ngStyle",e._thumbContainerStyles),p.Bb(5),p.xc(e.displayValue))},directives:[n.k],styles:[".mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:0;vertical-align:middle}.mat-slider.mat-slider-sliding:not(.mat-slider-disabled),.mat-slider:not(.mat-slider-disabled):active{cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-wrapper{position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{background-repeat:repeat;background-clip:content-box;box-sizing:border-box;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1),opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label{cursor:-webkit-grab;cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(.7);transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1),border-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform .4s cubic-bezier(.25,.8,.25,1),border-radius .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}@media (-ms-high-contrast:active){.mat-slider-thumb-label{outline:solid 1px}}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-sliding .mat-slider-thumb-container,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-track-fill{transition-duration:0s}.mat-slider-has-ticks .mat-slider-wrapper::after{content:'';position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}@media (-ms-high-contrast:active){.mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}@media (-ms-high-contrast:active){.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}@media (-ms-high-contrast:active){.mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-track-fill{transition:none}"],encapsulation:2,changeDetection:0}),t})(),z=(()=>{class t{}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},providers:[{provide:C.b,useClass:O.a}],imports:[[n.b,O.b],O.b]}),t})();const E=["lineCanvas"];function L(t,e){1&t&&p.Mb(0,"img",17)}function U(t,e){1&t&&p.Mb(0,"img",18)}function $(t,e){1&t&&p.Mb(0,"img",19)}function W(t,e){1&t&&p.Mb(0,"img",20)}function N(t,e){1&t&&p.Mb(0,"img",17)}function V(t,e){1&t&&p.Mb(0,"img",18)}function J(t,e){1&t&&p.Mb(0,"img",19)}function X(t,e){1&t&&p.Mb(0,"img",20)}function H(t,e){if(1&t&&(p.Qb(0,"h3",21),p.wc(1),p.Pb()),2&t){const t=p.ac(2);p.Bb(1),p.xc(t.scoreFromSlider)}}function q(t,e){1&t&&(p.Qb(0,"h3",21),p.wc(1,"200"),p.Pb())}function K(t,e){1&t&&(p.Qb(0,"h3",21),p.wc(1,"0"),p.Pb())}function Z(t,e){1&t&&p.Mb(0,"img",17)}function tt(t,e){1&t&&p.Mb(0,"img",18)}function et(t,e){1&t&&p.Mb(0,"img",19)}function it(t,e){1&t&&p.Mb(0,"img",20)}function nt(t,e){1&t&&p.Mb(0,"img",17)}function rt(t,e){1&t&&p.Mb(0,"img",18)}function st(t,e){1&t&&p.Mb(0,"img",19)}function ct(t,e){1&t&&p.Mb(0,"img",20)}function at(t,e){if(1&t&&(p.Qb(0,"h3",21),p.wc(1),p.Pb()),2&t){const t=p.ac(2);p.Bb(1),p.xc(t.scoreFromSlider2)}}function ot(t,e){1&t&&(p.Qb(0,"h3",21),p.wc(1,"0"),p.Pb())}function lt(t,e){1&t&&(p.Qb(0,"h3",21),p.wc(1,"200"),p.Pb())}function ut(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-button",22),p.Yb("click",(function(){return p.pc(t),p.ac(2).finishRound()})),p.Mb(1,"ion-icon",23),p.wc(2),p.bc(3,"translate"),p.Pb()}2&t&&(p.Bb(2),p.yc(" ",p.cc(3,1,"game.start_next_round")," "))}function dt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-button",22),p.Yb("click",(function(){return p.pc(t),p.ac(2).finishGame()})),p.Mb(1,"ion-icon",23),p.wc(2),p.bc(3,"translate"),p.Pb()}2&t&&(p.Bb(2),p.yc(" ",p.cc(3,1,"game.finish_game")," "))}function ht(t,e){if(1&t){const t=p.Rb();p.Qb(0,"div",3),p.Qb(1,"h5"),p.wc(2),p.bc(3,"translate"),p.Pb(),p.Qb(4,"div",4),p.Qb(5,"div",5),p.Qb(6,"div",6),p.Qb(7,"div",7),p.Qb(8,"div",8),p.Qb(9,"h3"),p.wc(10),p.Pb(),p.uc(11,L,1,0,"img",9),p.uc(12,U,1,0,"img",10),p.uc(13,$,1,0,"img",11),p.uc(14,W,1,0,"img",12),p.Pb(),p.Qb(15,"div",8),p.Qb(16,"h3"),p.wc(17),p.Pb(),p.uc(18,N,1,0,"img",9),p.uc(19,V,1,0,"img",10),p.uc(20,J,1,0,"img",11),p.uc(21,X,1,0,"img",12),p.Pb(),p.uc(22,H,2,1,"h3",13),p.uc(23,q,2,0,"h3",13),p.uc(24,K,2,0,"h3",13),p.Pb(),p.Qb(25,"mat-slider",14),p.Yb("input",(function(e){p.pc(t);const i=p.ac();return i.scoreFromSlider=e.value,i.onInputChangeSlider1(e)}))("change",(function(){return p.pc(t),p.ac().updateScorePrediction()}))("ngModelChange",(function(e){return p.pc(t),p.ac().scoreFromSlider=e})),p.Pb(),p.Pb(),p.Qb(26,"div",15),p.Qb(27,"div",7),p.Qb(28,"div",8),p.Qb(29,"h3"),p.wc(30),p.Pb(),p.uc(31,Z,1,0,"img",9),p.uc(32,tt,1,0,"img",10),p.uc(33,et,1,0,"img",11),p.uc(34,it,1,0,"img",12),p.Pb(),p.Qb(35,"div",8),p.Qb(36,"h3"),p.wc(37),p.Pb(),p.uc(38,nt,1,0,"img",9),p.uc(39,rt,1,0,"img",10),p.uc(40,st,1,0,"img",11),p.uc(41,ct,1,0,"img",12),p.Pb(),p.uc(42,at,2,1,"h3",13),p.uc(43,ot,2,0,"h3",13),p.uc(44,lt,2,0,"h3",13),p.Pb(),p.Qb(45,"mat-slider",14),p.Yb("input",(function(e){p.pc(t);const i=p.ac();return i.scoreFromSlider2=e.value,i.onInputChangeSlider2(e)}))("change",(function(){return p.pc(t),p.ac().updateScorePrediction()}))("ngModelChange",(function(e){return p.pc(t),p.ac().scoreFromSlider2=e})),p.Pb(),p.Pb(),p.Pb(),p.uc(46,ut,4,3,"ion-button",16),p.uc(47,dt,4,3,"ion-button",16),p.Pb(),p.Pb()}if(2&t){const t=p.ac();p.Bb(2),p.xc(p.cc(3,33,"game.finish_round")),p.Bb(8),p.xc(null==t.currentGame?null:t.currentGame.players[0].name),p.Bb(1),p.gc("ngIf",-2==t.tichus[0]),p.Bb(1),p.gc("ngIf",-1==t.tichus[0]),p.Bb(1),p.gc("ngIf",1==t.tichus[0]),p.Bb(1),p.gc("ngIf",2==t.tichus[0]),p.Bb(3),p.xc(null==t.currentGame?null:t.currentGame.players[1].name),p.Bb(1),p.gc("ngIf",-2==t.tichus[1]),p.Bb(1),p.gc("ngIf",-1==t.tichus[1]),p.Bb(1),p.gc("ngIf",1==t.tichus[1]),p.Bb(1),p.gc("ngIf",2==t.tichus[1]),p.Bb(1),p.gc("ngIf",!t.isDoubleWin),p.Bb(1),p.gc("ngIf",1==t.isDoubleWin),p.Bb(1),p.gc("ngIf",2==t.isDoubleWin),p.Bb(1),p.gc("disabled",t.isDoubleWin)("ngModel",t.scoreFromSlider),p.Bb(5),p.xc(null==t.currentGame?null:t.currentGame.players[2].name),p.Bb(1),p.gc("ngIf",-2==t.tichus[2]),p.Bb(1),p.gc("ngIf",-1==t.tichus[2]),p.Bb(1),p.gc("ngIf",1==t.tichus[2]),p.Bb(1),p.gc("ngIf",2==t.tichus[2]),p.Bb(3),p.xc(null==t.currentGame?null:t.currentGame.players[3].name),p.Bb(1),p.gc("ngIf",-2==t.tichus[3]),p.Bb(1),p.gc("ngIf",-1==t.tichus[3]),p.Bb(1),p.gc("ngIf",1==t.tichus[3]),p.Bb(1),p.gc("ngIf",2==t.tichus[3]),p.Bb(1),p.gc("ngIf",!t.isDoubleWin),p.Bb(1),p.gc("ngIf",1==t.isDoubleWin),p.Bb(1),p.gc("ngIf",2==t.isDoubleWin),p.Bb(1),p.gc("disabled",t.isDoubleWin)("ngModel",t.scoreFromSlider2),p.Bb(1),p.gc("ngIf",!t.gameShouldFinish&&!t.currentGame.isLastRound),p.Bb(1),p.gc("ngIf",t.gameShouldFinish||t.currentGame.isLastRound)}}function bt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-button",28),p.Yb("click",(function(){return p.pc(t),p.ac(2).triggerRematch()})),p.Mb(1,"ion-icon",23),p.wc(2),p.bc(3,"translate"),p.Pb()}2&t&&(p.Bb(2),p.yc(" ",p.cc(3,1,"game.rematch")," "))}function mt(t,e){if(1&t&&(p.Qb(0,"div",24),p.Qb(1,"h5"),p.wc(2),p.bc(3,"translate"),p.Pb(),p.Qb(4,"div",4),p.Qb(5,"div",25),p.Mb(6,"canvas",null,26),p.Pb(),p.uc(8,bt,4,3,"ion-button",27),p.Pb(),p.Pb()),2&t){const t=p.ac();p.Bb(2),p.Ac("",p.cc(3,4,"game.finished_title")," ",t.scorePrediction.newScore[0],":",t.scorePrediction.newScore[3]," "),p.Bb(6),p.gc("ngIf",!t.currentGame.tournamentId)}}let gt=(()=>{class t{constructor(t,e,i){this.modalController=t,this.httpClient=e,this.toastService=i,this.scorePrediction=null,this.isDoubleWin=null,this.tichus=[0,0,0,0],this.gameShouldFinish=!1,this.showFinishGameContent=!1,this.scoresTeam1=[0],this.scoresTeam2=[0]}ngOnInit(){this.scoreFromSlider=50,this.scoreFromSlider2=50,this.isDoubleWin=this.checkForDoubleWin(),this.currentRound.points=[this.scoreFromSlider,this.scoreFromSlider,100-this.scoreFromSlider,100-this.scoreFromSlider],this.updateScorePrediction(),this.calculateTichus()}calculateTichus(){for(let t=0;t<4;t++)1===this.currentRound.tichuAnnounced[t]&&1===this.currentRound.finishOrder[t]&&(this.tichus[t]=1),1===this.currentRound.bigTichuAnnounced[t]&&1===this.currentRound.finishOrder[t]&&(this.tichus[t]=2),1===this.currentRound.tichuAnnounced[t]&&1!==this.currentRound.finishOrder[t]&&(this.tichus[t]=-1),1===this.currentRound.bigTichuAnnounced[t]&&1!==this.currentRound.finishOrder[t]&&(this.tichus[t]=-2)}calculatePrediction(){let t=[0,0,0,0];const e=[0,0,0,0],i=[0,0,0,0];for(let n=0;n<4;n++)1===this.currentRound.tichuAnnounced[n]&&1===this.currentRound.finishOrder[n]&&(e[n]=1),1===this.currentRound.bigTichuAnnounced[n]&&1===this.currentRound.finishOrder[n]&&(i[n]=1);this.currentRound.finishOrder[0]+this.currentRound.finishOrder[1]===3&&(t=[200,0,0,0]),this.currentRound.finishOrder[2]+this.currentRound.finishOrder[3]===3&&(t=[0,0,200,0]);for(let n=0;n<4;n++)this.currentRound.tichuAnnounced[n]&&e[n]&&(t[n]+=100),this.currentRound.tichuAnnounced[n]&&!e[n]&&(t[n]-=100),this.currentRound.bigTichuAnnounced[n]&&i[n]&&(t[n]+=200),this.currentRound.bigTichuAnnounced[n]&&!i[n]&&(t[n]-=200);return this.isDoubleWin?[t[0]+t[1],t[2]+t[3]]:[t[0]+t[1]+this.scoreFromSlider,t[2]+t[3]+this.scoreFromSlider2]}onInputChangeSlider1(t){this.scoreFromSlider2=100-t.value}onInputChangeSlider2(t){this.scoreFromSlider=100-t.value}updateScorePrediction(){this.currentRound.points=[this.scoreFromSlider,this.scoreFromSlider,100-this.scoreFromSlider,100-this.scoreFromSlider],this.APIgetScorePrediction().subscribe(t=>{this.scorePrediction=t,this.gameShouldFinish=t.newScore[0]>999&&t.newScore[0]!==t.newScore[3]||t.newScore[3]>999&&t.newScore[0]!==t.newScore[3]})}checkForDoubleWin(){return this.currentRound.finishOrder[0]+this.currentRound.finishOrder[1]===3?1:this.currentRound.finishOrder[2]+this.currentRound.finishOrder[3]===3?2:null}APIfinishRound(t){return this.httpClient.post(h.b+"/games/addRound",{gameId:this.currentRound.gameId,round:this.currentRound,shouldFinishGame:t}).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}finishRound(){this.APIfinishRound(!1).subscribe(t=>{}),this.closeModal()}finishGame(){this.showFinishGameContent=!0,this.APIfinishRound(!0).subscribe(t=>{this.APIgetGameSummary(this.currentRound.gameId).subscribe(t=>{t.forEach(t=>{this.scoresTeam1.push(t.newScore[0]),this.scoresTeam2.push(t.newScore[3])}),this.createBarChart(this.scoresTeam1,this.scoresTeam2)})})}triggerRematch(){this.modalController.dismiss("rematch")}APIgetScorePrediction(){return this.httpClient.post(h.b+"/games/getScorePrediction",{gameId:this.currentRound.gameId,round:this.currentRound}).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}closeModal(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.modalController.dismiss()}))}APIgetGameSummary(t){return this.httpClient.get(`${h.b}/games/getGameSummary/${t}`).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIgetUserStatsById(t){return this.httpClient.get(`${h.b}/users/getUserStats/${t}`).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}createBarChart(t,e){this.lineChart=new m.Chart(this.lineCanvas.nativeElement,{type:"line",data:{labels:Array.from(Array(t.length).keys()),datasets:[{data:t,borderColor:"#BE3731",fill:!1},{data:e,borderColor:"#e57c0e",fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,title:{display:!1},legend:{display:!1},scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{gridLines:{display:!0},ticks:{stepSize:200}}]},tooltips:{enabled:!1}}})}}return t.\u0275fac=function(e){return new(e||t)(p.Lb(s.S),p.Lb(v.b),p.Lb(b.a))},t.\u0275cmp=p.Fb({type:t,selectors:[["app-finish-round-modal"]],viewQuery:function(t,e){var i;1&t&&p.Cc(E,!0),2&t&&p.mc(i=p.Zb())&&(e.lineCanvas=i.first)},inputs:{currentGame:"currentGame",currentRound:"currentRound"},decls:4,vars:2,consts:[[1,"styled-modal"],["class","inner-content",4,"ngIf"],["class","inner-content fixed-height",4,"ngIf"],[1,"inner-content"],[1,"bottom"],[1,"scoreboard-container"],[1,"left"],[1,"names-and-score"],[1,"name-flexbox"],["class","icon","src","../../assets/icon/finishRound/bigTichuNo.svg",4,"ngIf"],["class","icon","src","../../assets/icon/finishRound/smallTichuNo.svg",4,"ngIf"],["class","icon","src","../../assets/icon/finishRound/smallTichuYes.svg",4,"ngIf"],["class","icon","src","../../assets/icon/finishRound/bigTichuYes.svg",4,"ngIf"],["class","score",4,"ngIf"],["min","-25","max","125","step","5","vertical","",3,"disabled","ngModel","input","change","ngModelChange"],[1,"right"],["expand","full",3,"click",4,"ngIf"],["src","../../assets/icon/finishRound/bigTichuNo.svg",1,"icon"],["src","../../assets/icon/finishRound/smallTichuNo.svg",1,"icon"],["src","../../assets/icon/finishRound/smallTichuYes.svg",1,"icon"],["src","../../assets/icon/finishRound/bigTichuYes.svg",1,"icon"],[1,"score"],["expand","full",3,"click"],["slot","end","name","flag"],[1,"inner-content","fixed-height"],[1,"graph-container"],["lineCanvas",""],["class","absolute-bottom","expand","full",3,"click",4,"ngIf"],["expand","full",1,"absolute-bottom",3,"click"]],template:function(t,e){1&t&&(p.Qb(0,"div",0),p.uc(1,ht,48,35,"div",1),p.Pb(),p.Qb(2,"div",0),p.uc(3,mt,9,6,"div",2),p.Pb()),2&t&&(p.Bb(1),p.gc("ngIf",!e.showFinishGameContent),p.Bb(2),p.gc("ngIf",e.showFinishGameContent))},directives:[n.j,D,r.e,r.f,s.f,s.s],pipes:[c.c],styles:['ion-item[_ngcontent-%COMP%]{font-size:1rem!important;color:"dark"}ion-item.bold[_ngcontent-%COMP%], p.bold[_ngcontent-%COMP%]{font-weight:700}.graph-container[_ngcontent-%COMP%]{position:relative;padding:5vh 1rem;height:40vh!important}.primary[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.secondary[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.fixed-height[_ngcontent-%COMP%]{height:50vh}.absolute-bottom[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}.scoreboard-container[_ngcontent-%COMP%]{padding:1.5em 12vw}.scoreboard-container[_ngcontent-%COMP%], .scoreboard-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.scoreboard-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-end}.scoreboard-container[_ngcontent-%COMP%]   .names-and-score[_ngcontent-%COMP%]{padding-top:4em;padding-bottom:4em}.scoreboard-container[_ngcontent-%COMP%]   .names-and-score[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:right;margin-top:.5em;margin-bottom:.5em;font-size:1.2em}.scoreboard-container[_ngcontent-%COMP%]   .names-and-score[_ngcontent-%COMP%]   .name-flexbox[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.scoreboard-container[_ngcontent-%COMP%]   .names-and-score[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{font-weight:800!important}img.icon[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem;margin:0 .1rem}  .mat-slider .mat-slider-track-fill{background-color:var(--ion-color-primary)}  .mat-slider-track-background{background-color:#d3d3d3}  .mat-slider-disabled .mat-slider-thumb,   .mat-slider-disabled .mat-slider-track-background,   .mat-slider-disabled .mat-slider-track-fill{background-color:var(--ion-color-secondary)}  .mat-accent .mat-slider-thumb{height:30px;width:30px;background-color:var(--ion-color-primary);bottom:-20px;right:-15px}']}),t})();i("gcOT");var ft=i("e8h1");function pt(t,e){if(1&t&&(p.Qb(0,"ion-chip",21),p.Mb(1,"ion-icon",22),p.Qb(2,"ion-label"),p.wc(3),p.Pb(),p.Pb()),2&t){const t=p.ac(2);p.Bb(3),p.yc("TOURNAMENT TABLE ",null==t.currentGame?null:t.currentGame.tournamentTableNr,"")}}function vt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-chip",23),p.Yb("click",(function(){return p.pc(t),p.ac(2).showUnratedExplainerToast()})),p.Qb(1,"ion-label"),p.wc(2),p.bc(3,"translate"),p.Pb(),p.Pb()}2&t&&(p.Bb(2),p.xc(p.cc(3,1,"game.unrated")))}function _t(t,e){if(1&t&&(p.Qb(0,"ion-card-title"),p.wc(1),p.bc(2,"translate"),p.uc(3,pt,4,1,"ion-chip",19),p.uc(4,vt,4,3,"ion-chip",20),p.Pb()),2&t){const t=p.ac();p.Bb(1),p.zc("",t.currentScore[0]," ",p.cc(2,4,"game.points")," "),p.Bb(2),p.gc("ngIf",null==t.currentGame?null:t.currentGame.tournamentId),p.Bb(1),p.gc("ngIf",!(null!=t.currentGame&&t.currentGame.isRated))}}function Pt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-chip",23),p.Yb("click",(function(){return p.pc(t),p.ac(2).showUnratedExplainerToast()})),p.Qb(1,"ion-label"),p.wc(2),p.bc(3,"translate"),p.Pb(),p.Pb()}2&t&&(p.Bb(2),p.xc(p.cc(3,1,"game.unrated")))}function yt(t,e){if(1&t&&(p.Qb(0,"ion-card-title"),p.wc(1),p.bc(2,"translate"),p.uc(3,Pt,4,3,"ion-chip",20),p.Pb()),2&t){const t=p.ac();p.Bb(1),p.yc("",p.cc(2,2,"game.team_1")," "),p.Bb(2),p.gc("ngIf",t.gameWillBeUnrated)}}function kt(t,e){1&t&&p.Mb(0,"img",24)}function It(t,e){if(1&t&&p.Mb(0,"img",25),2&t){const t=p.ac();p.gc("src","data:image/jpeg;base64,"+t.profilePicture[0].img,p.rc)}}function xt(t,e){if(1&t&&(p.Qb(0,"ion-label"),p.Qb(1,"h2"),p.wc(2),p.Pb(),p.Qb(3,"h3"),p.wc(4),p.Pb(),p.Pb()),2&t){const t=p.ac();p.Bb(2),p.xc(null==t.currentGame||null==t.currentGame.players[0]?null:t.currentGame.players[0].name),p.Bb(2),p.xc(null==t.currentGame||null==t.currentGame.players[0]?null:t.currentGame.players[0].elo[(null==t.currentGame||null==t.currentGame.players[0]?null:t.currentGame.players[0].elo.length)-1].ranking)}}function wt(t,e){1&t&&(p.Qb(0,"ion-label"),p.Qb(1,"h2"),p.wc(2),p.bc(3,"translate"),p.Pb(),p.Qb(4,"h3"),p.wc(5),p.bc(6,"translate"),p.Pb(),p.Pb()),2&t&&(p.Bb(2),p.xc(p.cc(3,2,"game.add_player")),p.Bb(3),p.xc(p.cc(6,4,"game.tap_to_add_player")))}function Rt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",26),p.Yb("click",(function(){return p.pc(t),p.ac().toggleAnnounceSmallTichu(0)})),p.Pb()}}function Gt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",27),p.Yb("click",(function(){return p.pc(t),p.ac().toggleAnnounceSmallTichu(0)})),p.Pb()}}function Ot(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",28),p.Yb("click",(function(){return p.pc(t),p.ac().toggleAnnouncebigTichu(0)})),p.Pb()}}function Bt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",29),p.Yb("click",(function(){return p.pc(t),p.ac().toggleAnnouncebigTichu(0)})),p.Pb()}}function St(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",30),p.Yb("click",(function(){return p.pc(t),p.ac().togglePlayerHasFinished(0)})),p.Pb()}if(2&t){const t=p.ac();p.ic("src","src=",t.flagUrl[0],"",p.rc)}}function Ct(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",30),p.Yb("click",(function(){return p.pc(t),p.ac().toggleBombAmount(0)})),p.Pb()}if(2&t){const t=p.ac();p.hc("src",t.bombUrl[0],p.rc)}}function Tt(t,e){1&t&&p.Mb(0,"img",31)}function Mt(t,e){if(1&t&&p.Mb(0,"img",25),2&t){const t=p.ac();p.gc("src","data:image/jpeg;base64,"+t.profilePicture[1].img,p.rc)}}function Qt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-label",32),p.Yb("click",(function(){return p.pc(t),p.ac().openPlayerSearchModal(1)})),p.Qb(1,"h2"),p.wc(2),p.Pb(),p.Qb(3,"h3"),p.wc(4),p.Pb(),p.Pb()}if(2&t){const t=p.ac();p.Bb(2),p.xc(null==t.currentGame.players[1]?null:t.currentGame.players[1].name),p.Bb(2),p.xc(null==t.currentGame.players[1]?null:t.currentGame.players[1].elo[(null==t.currentGame.players[1]?null:t.currentGame.players[1].elo.length)-1].ranking)}}function At(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-label",32),p.Yb("click",(function(){return p.pc(t),p.ac().openPlayerSearchModal(1)})),p.Qb(1,"h2"),p.wc(2),p.bc(3,"translate"),p.Pb(),p.Qb(4,"h3"),p.wc(5),p.bc(6,"translate"),p.Pb(),p.Pb()}2&t&&(p.Bb(2),p.xc(p.cc(3,2,"game.add_player")),p.Bb(3),p.xc(p.cc(6,4,"game.tap_to_add_player")))}function jt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",26),p.Yb("click",(function(){return p.pc(t),p.ac().toggleAnnounceSmallTichu(1)})),p.Pb()}}function Yt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",27),p.Yb("click",(function(){return p.pc(t),p.ac().toggleAnnounceSmallTichu(1)})),p.Pb()}}function Ft(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",28),p.Yb("click",(function(){return p.pc(t),p.ac().toggleAnnouncebigTichu(1)})),p.Pb()}}function Dt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",29),p.Yb("click",(function(){return p.pc(t),p.ac().toggleAnnouncebigTichu(1)})),p.Pb()}}function zt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",30),p.Yb("click",(function(){return p.pc(t),p.ac().togglePlayerHasFinished(1)})),p.Pb()}if(2&t){const t=p.ac();p.ic("src","src=",t.flagUrl[1],"",p.rc)}}function Et(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",30),p.Yb("click",(function(){return p.pc(t),p.ac().toggleBombAmount(1)})),p.Pb()}if(2&t){const t=p.ac();p.hc("src",t.bombUrl[1],p.rc)}}function Lt(t,e){if(1&t&&(p.Qb(0,"ion-chip",21),p.Mb(1,"ion-icon",22),p.Qb(2,"ion-label"),p.wc(3),p.Pb(),p.Pb()),2&t){const t=p.ac(3);p.Bb(3),p.yc("TOURNAMENT TABLE ",null==t.currentGame?null:t.currentGame.tournamentTableNr,"")}}function Ut(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-chip",23),p.Yb("click",(function(){return p.pc(t),p.ac(3).showUnratedExplainerToast()})),p.Qb(1,"ion-label"),p.wc(2),p.bc(3,"translate"),p.Pb(),p.Pb()}2&t&&(p.Bb(2),p.xc(p.cc(3,1,"game.unrated")))}function $t(t,e){if(1&t&&(p.Qb(0,"ion-card-title"),p.wc(1),p.bc(2,"translate"),p.uc(3,Lt,4,1,"ion-chip",19),p.uc(4,Ut,4,3,"ion-chip",20),p.Pb()),2&t){const t=p.ac(2);p.Bb(1),p.zc("",t.currentScore[3]," ",p.cc(2,4,"game.points")," "),p.Bb(2),p.gc("ngIf",null==t.currentGame?null:t.currentGame.tournamentId),p.Bb(1),p.gc("ngIf",!t.currentGame.isRated)}}function Wt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-chip",23),p.Yb("click",(function(){return p.pc(t),p.ac(3).showUnratedExplainerToast()})),p.Qb(1,"ion-label"),p.wc(2),p.bc(3,"translate"),p.Pb(),p.Pb()}2&t&&(p.Bb(2),p.xc(p.cc(3,1,"game.unrated")))}function Nt(t,e){if(1&t&&(p.Qb(0,"ion-card-title"),p.wc(1),p.bc(2,"translate"),p.uc(3,Wt,4,3,"ion-chip",20),p.Pb()),2&t){const t=p.ac(2);p.Bb(1),p.yc("",p.cc(2,2,"game.team_2")," "),p.Bb(2),p.gc("ngIf",t.gameWillBeUnrated)}}function Vt(t,e){1&t&&p.Mb(0,"img",37)}function Jt(t,e){if(1&t&&p.Mb(0,"img",25),2&t){const t=p.ac(2);p.gc("src","data:image/jpeg;base64,"+t.profilePicture[2].img,p.rc)}}function Xt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-label",32),p.Yb("click",(function(){return p.pc(t),p.ac(2).openPlayerSearchModal(2)})),p.Qb(1,"h2"),p.wc(2),p.Pb(),p.Qb(3,"h3"),p.wc(4),p.Pb(),p.Pb()}if(2&t){const t=p.ac(2);p.Bb(2),p.xc(null==t.currentGame||null==t.currentGame.players[2]?null:t.currentGame.players[2].name),p.Bb(2),p.xc(null==t.currentGame||null==t.currentGame.players[2]?null:t.currentGame.players[2].elo[(null==t.currentGame.players[2]?null:t.currentGame.players[2].elo.length)-1].ranking)}}function Ht(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-label",32),p.Yb("click",(function(){return p.pc(t),p.ac(2).openPlayerSearchModal(2)})),p.Qb(1,"h2"),p.wc(2),p.bc(3,"translate"),p.Pb(),p.Qb(4,"h3"),p.wc(5),p.bc(6,"translate"),p.Pb(),p.Pb()}2&t&&(p.Bb(2),p.xc(p.cc(3,2,"game.add_player")),p.Bb(3),p.xc(p.cc(6,4,"game.tap_to_add_player")))}function qt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",26),p.Yb("click",(function(){return p.pc(t),p.ac(2).toggleAnnounceSmallTichu(2)})),p.Pb()}}function Kt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",27),p.Yb("click",(function(){return p.pc(t),p.ac(2).toggleAnnounceSmallTichu(2)})),p.Pb()}}function Zt(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",28),p.Yb("click",(function(){return p.pc(t),p.ac(2).toggleAnnouncebigTichu(2)})),p.Pb()}}function te(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",29),p.Yb("click",(function(){return p.pc(t),p.ac(2).toggleAnnouncebigTichu(2)})),p.Pb()}}function ee(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",30),p.Yb("click",(function(){return p.pc(t),p.ac(2).togglePlayerHasFinished(2)})),p.Pb()}if(2&t){const t=p.ac(2);p.ic("src","src=",t.flagUrl[2],"",p.rc)}}function ie(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",30),p.Yb("click",(function(){return p.pc(t),p.ac(2).toggleBombAmount(2)})),p.Pb()}if(2&t){const t=p.ac(2);p.hc("src",t.bombUrl[2],p.rc)}}function ne(t,e){1&t&&p.Mb(0,"img",38)}function re(t,e){if(1&t&&p.Mb(0,"img",25),2&t){const t=p.ac(2);p.gc("src","data:image/jpeg;base64,"+t.profilePicture[3].img,p.rc)}}function se(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-label",32),p.Yb("click",(function(){return p.pc(t),p.ac(2).openPlayerSearchModal(3)})),p.Qb(1,"h2"),p.wc(2),p.Pb(),p.Qb(3,"h3"),p.wc(4),p.Pb(),p.Pb()}if(2&t){const t=p.ac(2);p.Bb(2),p.xc(null==t.currentGame||null==t.currentGame.players[3]?null:t.currentGame.players[3].name),p.Bb(2),p.xc(null==t.currentGame||null==t.currentGame.players[3]?null:t.currentGame.players[3].elo[(null==t.currentGame.players[3]?null:t.currentGame.players[3].elo.length)-1].ranking)}}function ce(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-label",32),p.Yb("click",(function(){return p.pc(t),p.ac(2).openPlayerSearchModal(3)})),p.Qb(1,"h2"),p.wc(2),p.bc(3,"translate"),p.Pb(),p.Qb(4,"h3"),p.wc(5),p.bc(6,"translate"),p.Pb(),p.Pb()}2&t&&(p.Bb(2),p.xc(p.cc(3,2,"game.add_player")),p.Bb(3),p.xc(p.cc(6,4,"game.tap_to_add_player")))}function ae(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",26),p.Yb("click",(function(){return p.pc(t),p.ac(2).toggleAnnounceSmallTichu(3)})),p.Pb()}}function oe(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",27),p.Yb("click",(function(){return p.pc(t),p.ac(2).toggleAnnounceSmallTichu(3)})),p.Pb()}}function le(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",28),p.Yb("click",(function(){return p.pc(t),p.ac(2).toggleAnnouncebigTichu(3)})),p.Pb()}}function ue(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",29),p.Yb("click",(function(){return p.pc(t),p.ac(2).toggleAnnouncebigTichu(3)})),p.Pb()}}function de(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",30),p.Yb("click",(function(){return p.pc(t),p.ac(2).togglePlayerHasFinished(3)})),p.Pb()}if(2&t){const t=p.ac(2);p.ic("src","src=",t.flagUrl[3],"",p.rc)}}function he(t,e){if(1&t){const t=p.Rb();p.Qb(0,"img",30),p.Yb("click",(function(){return p.pc(t),p.ac(2).toggleBombAmount(3)})),p.Pb()}if(2&t){const t=p.ac(2);p.hc("src",t.bombUrl[3],p.rc)}}function be(t,e){if(1&t){const t=p.Rb();p.Qb(0,"ion-card"),p.Qb(1,"ion-card-header"),p.uc(2,$t,5,6,"ion-card-title",1),p.uc(3,Nt,4,4,"ion-card-title",1),p.Pb(),p.Qb(4,"ion-card-content"),p.Qb(5,"ion-list"),p.Qb(6,"ion-item"),p.Mb(7,"div",2),p.Qb(8,"ion-avatar",3),p.uc(9,Vt,1,0,"img",33),p.uc(10,Jt,1,1,"img",5),p.Pb(),p.uc(11,Xt,5,2,"ion-label",16),p.uc(12,Ht,7,6,"ng-template",null,34,p.vc),p.uc(14,qt,1,0,"img",8),p.uc(15,Kt,1,0,"img",9),p.uc(16,Zt,1,0,"img",10),p.uc(17,te,1,0,"img",11),p.uc(18,ee,1,1,"img",12),p.uc(19,ie,1,1,"img",12),p.Pb(),p.Qb(20,"ion-item",13),p.Mb(21,"div",2),p.Qb(22,"ion-avatar",14),p.Yb("click",(function(){return p.pc(t),p.ac().openPlayerSearchModal(3)})),p.uc(23,ne,1,0,"img",35),p.uc(24,re,1,1,"img",5),p.Pb(),p.uc(25,se,5,2,"ion-label",16),p.uc(26,ce,7,6,"ng-template",null,36,p.vc),p.uc(28,ae,1,0,"img",8),p.uc(29,oe,1,0,"img",9),p.uc(30,le,1,0,"img",10),p.uc(31,ue,1,0,"img",11),p.uc(32,de,1,1,"img",12),p.uc(33,he,1,1,"img",12),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&t){const t=p.nc(13),e=p.nc(27),i=p.ac();p.Bb(2),p.gc("ngIf",null==i.currentGame?null:i.currentGame._id),p.Bb(1),p.gc("ngIf",!(null!=i.currentGame&&i.currentGame._id)),p.Bb(6),p.gc("ngIf",!i.profilePicture[2]),p.Bb(1),p.gc("ngIf",i.profilePicture[2]),p.Bb(1),p.gc("ngIf",(null==i.currentGame?null:i.currentGame.players)&&(null==i.currentGame?null:i.currentGame.players[2]))("ngIfElse",t),p.Bb(3),p.gc("ngIf",i.canAccounceTichu(2)),p.Bb(1),p.gc("ngIf",1==(null==i.currentRound?null:i.currentRound.tichuAnnounced[2])),p.Bb(1),p.gc("ngIf",i.canAccounceTichu(2)),p.Bb(1),p.gc("ngIf",1==(null==i.currentRound?null:i.currentRound.bigTichuAnnounced[2])),p.Bb(1),p.gc("ngIf",null==i.currentGame?null:i.currentGame._id),p.Bb(1),p.gc("ngIf",null==i.currentGame?null:i.currentGame._id),p.Bb(4),p.gc("ngIf",!i.profilePicture[3]),p.Bb(1),p.gc("ngIf",i.profilePicture[3]),p.Bb(1),p.gc("ngIf",(null==i.currentGame?null:i.currentGame.players)&&(null==i.currentGame?null:i.currentGame.players[3]))("ngIfElse",e),p.Bb(3),p.gc("ngIf",i.canAccounceTichu(3)),p.Bb(1),p.gc("ngIf",1==(null==i.currentRound?null:i.currentRound.tichuAnnounced[3])),p.Bb(1),p.gc("ngIf",i.canAccounceTichu(3)),p.Bb(1),p.gc("ngIf",1==(null==i.currentRound?null:i.currentRound.bigTichuAnnounced[3])),p.Bb(1),p.gc("ngIf",null==i.currentGame?null:i.currentGame._id),p.Bb(1),p.gc("ngIf",null==i.currentGame?null:i.currentGame._id)}}const me=[{path:"",component:(()=>{class t{constructor(t,e,i,n,r,s){this.translator=t,this.storage=e,this.toastService=i,this.httpClient=n,this.modalController=r,this.router=s,this.bombUrl=["../../assets/icon/bomb0.svg","../../assets/icon/bomb0.svg","../../assets/icon/bomb0.svg","../../assets/icon/bomb0.svg"],this.flagUrl=["../../assets/icon/flag-outline.svg","../../assets/icon/flag-outline.svg","../../assets/icon/flag-outline.svg","../../assets/icon/flag-outline.svg"],this.currentScore=[0,0,0,0],this.keyboardIsOpen=!1,this.profilePicture=[],this.router.events.subscribe(t=>{t instanceof a.c&&"/tabs/newGame"===t.url&&(this.initiateOngoingGames(),this.APIgetImage().subscribe(t=>{t.img&&(this.profilePicture[0]=t)}))})}ngOnInit(){this.storage.get("PLATFORM").then(t=>{t&&(this.platform=t)},t=>console.error(t))}resetRound(){this.bombUrl=["../../assets/icon/bomb0.svg","../../assets/icon/bomb0.svg","../../assets/icon/bomb0.svg","../../assets/icon/bomb0.svg"],this.flagUrl=["../../assets/icon/flag-outline.svg","../../assets/icon/flag-outline.svg","../../assets/icon/flag-outline.svg","../../assets/icon/flag-outline.svg"],this.currentRound={},this.currentRound.tichuAnnounced=[null,null,null,null],this.currentRound.bigTichuAnnounced=[null,null,null,null],this.currentRound.finishOrder=[0,0,0,0],this.currentRound.bombs=[0,0,0,0]}initiateOngoingGames(){this.APIgetOngoingGameOfUser().subscribe(t=>{var e;if(this.resetRound(),t.length<1){const t=null===(e=this.currentGame)||void 0===e?void 0:e.players[0];this.currentGame={},this.currentGame.players=[t,null,null,null],this.profilePicture[1]=null,this.profilePicture[2]=null,this.profilePicture[3]=null,this.APIgetLoggedInUser().subscribe(t=>{this.currentGame.players=[t,null,null,null],this.currentScore=[0,0,0,0],this.gameWillBeUnrated=!1})}t.length>0&&(this.currentGame=t[0],this.currentRound.gameId=t[0]._id,this.APIgetCurrentGameScore(this.currentGame._id).subscribe(t=>{this.currentScore=t}),this.updateProfilePictures())})}updateProfilePictures(){for(let t=1;t<this.currentGame.players.length;t++)this.currentGame.players[t]&&this.APIgetProfilePictureById(this.currentGame.players[t].id).subscribe(e=>{this.profilePicture[t]=e.img?e:null})}showTournamentExplainerToast(){return Object(o.a)(this,void 0,void 0,(function*(){this.toastService.presentToast(this.translator.instant("game.toast_tourney_requirements"))}))}showUnratedExplainerToast(){return Object(o.a)(this,void 0,void 0,(function*(){this.toastService.presentToast(this.translator.instant("game.hint_guest_unranked"))}))}openGameSummaryModal(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:w,cssClass:"auto-height bottom-sheet",showBackdrop:!0,mode:"ios",componentProps:{currentGame:this.currentGame}});return t.onDidDismiss().then(()=>{this.initiateOngoingGames()}),yield t.present()}))}openPlayerSearchModal(t){return Object(o.a)(this,void 0,void 0,(function*(){if(this.currentGame._id)return;this.keyboardIsOpen=!0;const e=yield this.modalController.create({component:d.a,cssClass:"auto-height bottom-sheet",showBackdrop:!0,mode:"ios"});return e.onDidDismiss().then(e=>{if(this.keyboardIsOpen=!1,e.data){for(const t of this.currentGame.players)if(t&&e.data.email&&t.email===e.data.email&&"guestAccount@test.com"!==e.data.email)return void this.toastService.presentToast(this.translator.instant("game.cannot_add_user_twice_error"));this.APIhasActiveGames(e.data.id).subscribe(i=>{i.hasActiveGames&&!0===i.hasActiveGames&&"guestAccount@test.com"!==e.data.email?this.toastService.presentToast(this.translator.instant("game.toast_error_user_has_active_game")):this.APIcheckIfOnWhitelist(e.data.id).subscribe(i=>{h.a||!0===i.isUserOnWhitelist||"guestAccount@test.com"===e.data.email||"timo"===this.currentGame.players[0].name?(this.currentGame.players[t]=e.data,this.gameWillBeUnrated=this.willGameBeUnrated(),this.updateProfilePictures(),this.currentGame.players[0]&&this.currentGame.players[1]&&this.currentGame.players[2]&&this.currentGame.players[3]&&this.APIstartGame().subscribe(t=>{this.initiateOngoingGames()})):this.toastService.presentToast(this.translator.instant("game.toast_not_whitelisted"))})})}}),yield e.present()}))}willGameBeUnrated(){for(const t of this.currentGame.players)if(t&&"guestAccount@test.com"===t.email)return!0;return!1}canAccounceTichu(t){var e,i,n;return!!this.currentRound&&!!(null===(e=this.currentGame)||void 0===e?void 0:e._id)&&1!==(null===(i=this.currentRound)||void 0===i?void 0:i.bigTichuAnnounced[t])&&1!==(null===(n=this.currentRound)||void 0===n?void 0:n.tichuAnnounced[t])}openFinishRoundModal(){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:gt,cssClass:"auto-height bottom-sheet",showBackdrop:!0,mode:"ios",componentProps:{currentRound:this.currentRound,currentGame:this.currentGame}});return t.onDidDismiss().then(t=>{"rematch"===t.data?this.APIstartGame().subscribe(t=>{this.currentGame._id=t.gameId,this.currentRound.gameId=t.gameId,this.initiateOngoingGames()}):this.initiateOngoingGames()}),yield t.present()}))}toggleAnnounceSmallTichu(t){this.currentRound.tichuAnnounced[t]=1===this.currentRound.tichuAnnounced[t]?0:1}toggleAnnouncebigTichu(t){this.currentRound.bigTichuAnnounced[t]=1===this.currentRound.bigTichuAnnounced[t]?0:1}toggleBombAmount(t){3===this.currentRound.bombs[t]?this.currentRound.bombs[t]=0:this.currentRound.bombs[t]++,this.bombUrl[t]="../../assets/icon/bomb"+this.currentRound.bombs[t]+".svg"}togglePlayerHasFinished(t){if(0!==this.currentRound.finishOrder[t])return this.currentRound.finishOrder=[0,0,0,0],this.flagUrl[0]="../../assets/icon/flag-outline.svg",this.flagUrl[1]="../../assets/icon/flag-outline.svg",this.flagUrl[2]="../../assets/icon/flag-outline.svg",void(this.flagUrl[3]="../../assets/icon/flag-outline.svg");const e=this.currentRound.finishOrder[0]+this.currentRound.finishOrder[1]+this.currentRound.finishOrder[2]+this.currentRound.finishOrder[3];0===e&&(this.currentRound.finishOrder[t]=1),1===e&&(this.currentRound.finishOrder[t]=2),3===e&&(this.currentRound.finishOrder[t]=3,0===this.currentRound.finishOrder[0]&&(this.currentRound.finishOrder[0]=4),0===this.currentRound.finishOrder[1]&&(this.currentRound.finishOrder[1]=4),0===this.currentRound.finishOrder[2]&&(this.currentRound.finishOrder[2]=4),0===this.currentRound.finishOrder[3]&&(this.currentRound.finishOrder[3]=4),this.openFinishRoundModal()),this.flagUrl[t]="../../assets/icon/flag"+this.currentRound.finishOrder[t]+".svg",this.currentRound.finishOrder[2]+this.currentRound.finishOrder[3]===0&&0!==this.currentRound.finishOrder[0]&&0!==this.currentRound.finishOrder[1]&&(this.currentRound.finishOrder[2]=3,this.currentRound.finishOrder[3]=4,this.openFinishRoundModal()),this.currentRound.finishOrder[0]+this.currentRound.finishOrder[1]===0&&0!==this.currentRound.finishOrder[2]&&0!==this.currentRound.finishOrder[3]&&(this.currentRound.finishOrder[0]=3,this.currentRound.finishOrder[1]=4,this.openFinishRoundModal())}APIgetOngoingGameOfUser(){return this.httpClient.get(h.b+"/users/getOngoingGame").pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIhasActiveGames(t){return this.httpClient.get(`${h.b}/users/hasActiveGames/${t}`).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIgetCurrentGameScore(t){return this.httpClient.get(`${h.b}/games/getCurrentScore/${t}`).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIstartGame(){return this.httpClient.post(h.b+"/games/create",{players:[this.currentGame.players[0].id,this.currentGame.players[1].id,this.currentGame.players[2].id,this.currentGame.players[3].id]}).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIcheckIfOnWhitelist(t){return this.httpClient.post(h.b+"/users/checkIfOnWhitelist",{id:t}).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIgetActiveTournament(){return this.httpClient.get(h.b+"/tournament/active").pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIgetLoggedInUser(){return this.httpClient.get(h.b+"/users/loggedInUser").pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIgetImage(){return this.httpClient.get(h.b+"/users/profilePicture").pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}APIgetProfilePictureById(t){return this.httpClient.get(`${h.b}/users/profilePictureById/${t}`).pipe(Object(u.a)(t=>(this.toastService.presentToast(),Object(l.a)(t))))}}return t.\u0275fac=function(e){return new(e||t)(p.Lb(c.d),p.Lb(ft.b),p.Lb(b.a),p.Lb(v.b),p.Lb(s.S),p.Lb(a.h))},t.\u0275cmp=p.Fb({type:t,selectors:[["app-new-game"]],decls:40,vars:27,consts:[[1,"flexbox-parent"],[4,"ngIf"],["tabindex","0"],["slot","start"],["src","../../assets/icon/avatars/avatar_dragon.svg",4,"ngIf"],[3,"src",4,"ngIf"],[4,"ngIf","ngIfElse"],["userNotDefinedYet",""],["class","icon","src","../../assets/icon/smallTichuNo.svg",3,"click",4,"ngIf"],["class","icon","src","../../assets/icon/smallTichuYes.svg",3,"click",4,"ngIf"],["class","icon","src","../../assets/icon/bigTichuNo.svg",3,"click",4,"ngIf"],["class","icon","src","../../assets/icon/bigTichuYes.svg",3,"click",4,"ngIf"],["class","icon",3,"src","click",4,"ngIf"],[1,"no-bottom-border"],["slot","start",3,"click"],["src","../../assets/icon/avatars/avatar_dog.svg",4,"ngIf"],[3,"click",4,"ngIf","ngIfElse"],["userNotDefinedYet1",""],["expand","block",3,"ngClass","click"],["outline","","color","secondary",4,"ngIf"],["outline","","color","secondary",3,"click",4,"ngIf"],["outline","","color","secondary"],["name","trophy",1,"trophy"],["outline","","color","secondary",3,"click"],["src","../../assets/icon/avatars/avatar_dragon.svg"],[3,"src"],["src","../../assets/icon/smallTichuNo.svg",1,"icon",3,"click"],["src","../../assets/icon/smallTichuYes.svg",1,"icon",3,"click"],["src","../../assets/icon/bigTichuNo.svg",1,"icon",3,"click"],["src","../../assets/icon/bigTichuYes.svg",1,"icon",3,"click"],[1,"icon",3,"src","click"],["src","../../assets/icon/avatars/avatar_dog.svg"],[3,"click"],["src","../../assets/icon/avatars/avatar_phoenix.svg",4,"ngIf"],["userNotDefinedYet2",""],["src","../../assets/icon/avatars/avatar_bird.svg",4,"ngIf"],["userNotDefinedYet3",""],["src","../../assets/icon/avatars/avatar_phoenix.svg"],["src","../../assets/icon/avatars/avatar_bird.svg"]],template:function(t,e){if(1&t&&(p.Qb(0,"ion-content"),p.Qb(1,"div",0),p.Qb(2,"ion-card"),p.Qb(3,"ion-card-header"),p.uc(4,_t,5,6,"ion-card-title",1),p.uc(5,yt,4,4,"ion-card-title",1),p.Pb(),p.Qb(6,"ion-card-content"),p.Qb(7,"ion-list"),p.Qb(8,"ion-item"),p.Mb(9,"div",2),p.Qb(10,"ion-avatar",3),p.uc(11,kt,1,0,"img",4),p.uc(12,It,1,1,"img",5),p.Pb(),p.uc(13,xt,5,2,"ion-label",6),p.uc(14,wt,7,6,"ng-template",null,7,p.vc),p.uc(16,Rt,1,0,"img",8),p.uc(17,Gt,1,0,"img",9),p.uc(18,Ot,1,0,"img",10),p.uc(19,Bt,1,0,"img",11),p.uc(20,St,1,1,"img",12),p.uc(21,Ct,1,1,"img",12),p.Pb(),p.Qb(22,"ion-item",13),p.Mb(23,"div",2),p.Qb(24,"ion-avatar",14),p.Yb("click",(function(){return e.openPlayerSearchModal(1)})),p.uc(25,Tt,1,0,"img",15),p.uc(26,Mt,1,1,"img",5),p.Pb(),p.uc(27,Qt,5,2,"ion-label",16),p.uc(28,At,7,6,"ng-template",null,17,p.vc),p.uc(30,jt,1,0,"img",8),p.uc(31,Yt,1,0,"img",9),p.uc(32,Ft,1,0,"img",10),p.uc(33,Dt,1,0,"img",11),p.uc(34,zt,1,1,"img",12),p.uc(35,Et,1,1,"img",12),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(36,"ion-button",18),p.Yb("click",(function(){return e.openGameSummaryModal()})),p.wc(37),p.bc(38,"translate"),p.Pb(),p.uc(39,be,34,22,"ion-card",1),p.Pb(),p.Pb()),2&t){const t=p.nc(15),i=p.nc(29);p.Bb(4),p.gc("ngIf",null==e.currentGame?null:e.currentGame._id),p.Bb(1),p.gc("ngIf",!(null!=e.currentGame&&e.currentGame._id)),p.Bb(6),p.gc("ngIf",!e.profilePicture[0]),p.Bb(1),p.gc("ngIf",e.profilePicture[0]),p.Bb(1),p.gc("ngIf",(null==e.currentGame?null:e.currentGame.players)&&(null==e.currentGame?null:e.currentGame.players[0]))("ngIfElse",t),p.Bb(3),p.gc("ngIf",e.canAccounceTichu(0)),p.Bb(1),p.gc("ngIf",1==(null==e.currentRound?null:e.currentRound.tichuAnnounced[0])),p.Bb(1),p.gc("ngIf",e.canAccounceTichu(0)),p.Bb(1),p.gc("ngIf",1==(null==e.currentRound?null:e.currentRound.bigTichuAnnounced[0])),p.Bb(1),p.gc("ngIf",null==e.currentGame?null:e.currentGame._id),p.Bb(1),p.gc("ngIf",null==e.currentGame?null:e.currentGame._id),p.Bb(4),p.gc("ngIf",!e.profilePicture[1]),p.Bb(1),p.gc("ngIf",e.profilePicture[1]),p.Bb(1),p.gc("ngIf",(null==e.currentGame?null:e.currentGame.players)&&(null==e.currentGame?null:e.currentGame.players[1]))("ngIfElse",i),p.Bb(3),p.gc("ngIf",e.canAccounceTichu(1)),p.Bb(1),p.gc("ngIf",1==(null==e.currentRound?null:e.currentRound.tichuAnnounced[1])),p.Bb(1),p.gc("ngIf",e.canAccounceTichu(1)),p.Bb(1),p.gc("ngIf",1==(null==e.currentRound?null:e.currentRound.bigTichuAnnounced[1])),p.Bb(1),p.gc("ngIf",null==e.currentGame?null:e.currentGame._id),p.Bb(1),p.gc("ngIf",null==e.currentGame?null:e.currentGame._id),p.Bb(1),p.gc("ngClass",null!=e.currentGame&&e.currentGame._id?"summary":"summary invisible"),p.Bb(1),p.yc(" ",p.cc(38,25,"game.summary")," "),p.Bb(2),p.gc("ngIf",!("android"==e.platform&&e.keyboardIsOpen))}},directives:[s.p,s.h,s.j,n.j,s.i,s.y,s.u,s.e,s.f,n.h,s.l,s.n,s.s,s.x],pipes:[c.c],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-background)}ion-content[_ngcontent-%COMP%]::part(background){background:url(phoenix.a6d9a2b2c790aa840f37.png) no-repeat 0 0 fixed;background-size:cover}.flexbox-parent[_ngcontent-%COMP%]{padding-top:3rem;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:stretch;height:90vh}ion-chip[_ngcontent-%COMP%]{position:absolute;height:1.3rem;right:0}ion-chip[_ngcontent-%COMP%], ion-chip[_ngcontent-%COMP%]   .trophy[_ngcontent-%COMP%]{font-size:.7rem!important;color:#fff}.gameCannotBeTournamentGame[_ngcontent-%COMP%]{-webkit-text-decoration-line:line-through;text-decoration-line:line-through;text-decoration:line-through}ion-card-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}ion-button.summary[_ngcontent-%COMP%]{width:90%}ion-button.invisible[_ngcontent-%COMP%], ion-card.invisible[_ngcontent-%COMP%]{visibility:hidden}img.icon[_ngcontent-%COMP%]{height:2rem;width:2rem;margin-left:.1rem;margin-right:.1rem}.no-bottom-border[_ngcontent-%COMP%]{--border-width:0;--inner-border-width:0}ion-avatar[_ngcontent-%COMP%]{background:var(--ion-color-secondary)}"]}),t})()}];let ge=(()=>{class t{}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[a.j.forChild(me)],a.j]}),t})();var fe=i("t5+X");const pe=[{path:"",component:gt}];let ve=(()=>{class t{}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[a.j.forChild(pe)],a.j]}),t})(),_e=(()=>{class t{}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[n.b,r.a,s.Q,ve,c.b.forChild(),z]]}),t})();const Pe=[{path:"",component:w}];let ye=(()=>{class t{}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[a.j.forChild(Pe)],a.j]}),t})(),ke=(()=>{class t{}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[n.b,r.a,s.Q,ye,c.b.forChild()]]}),t})(),Ie=(()=>{class t{}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[n.b,O.d,O.b],O.b]}),t})(),xe=(()=>{class t{}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[n.b,r.a,s.Q,ge,fe.a,_e,ke,Ie,c.b.forChild()]]}),t})()}}]);
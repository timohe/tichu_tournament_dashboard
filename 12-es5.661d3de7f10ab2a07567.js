function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{X3zk:function(e,n,t){"use strict";t.r(n),t.d(n,"LoginPageModule",(function(){return R}));var o=t("ofXK"),r=t("3Pt+"),i=t("TEn/"),s=t("tyNb"),a=t("sV9K"),c=t("AytR"),l=t("z6cu"),b=t("JIr8"),g=t("NEhk"),u=t("fXoL"),d=t("sYmb"),p=t("tk/3"),f=t("e8h1");function h(e,n){1&e&&(u.Mb(0,"h5"),u.kc(1),u.Xb(2,"translate"),u.Lb()),2&e&&(u.zb(1),u.lc(u.Yb(2,1,"login.good_to_have_you_here")))}function m(e,n){1&e&&(u.Mb(0,"h5"),u.kc(1),u.Xb(2,"translate"),u.Lb()),2&e&&(u.zb(1),u.lc(u.Yb(2,1,"login.lets_get_started")))}function _(e,n){1&e&&(u.Mb(0,"h5"),u.kc(1),u.Xb(2,"translate"),u.Lb()),2&e&&(u.zb(1),u.lc(u.Yb(2,1,"login.no_worries")))}function M(e,n){1&e&&(u.Mb(0,"ion-label"),u.kc(1),u.Xb(2,"translate"),u.Lb()),2&e&&(u.zb(1),u.mc(" ",u.Yb(2,1,"login.sign_in")," "))}function v(e,n){1&e&&(u.Mb(0,"ion-label"),u.Kb(1,"ion-spinner",15),u.Lb())}function w(e,n){if(1&e){var t=u.Nb();u.Mb(0,"div",5),u.Mb(1,"ion-item",6),u.Kb(2,"ion-icon",7),u.Mb(3,"ion-input",8),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToLogin.email=e})),u.Lb(),u.Lb(),u.Mb(4,"ion-item",9),u.Kb(5,"ion-icon",10),u.Mb(6,"ion-input",11),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToLogin.password=e})),u.Lb(),u.Lb(),u.Mb(7,"ion-button",12),u.Ub("click",(function(){return u.gc(t),u.Wb().login()})),u.jc(8,M,3,3,"ion-label",3),u.jc(9,v,2,0,"ion-label",3),u.Lb(),u.Mb(10,"ion-button",13),u.Ub("click",(function(){return u.gc(t),u.Wb().toggleSignup(!0)})),u.kc(11),u.Xb(12,"translate"),u.Lb(),u.Mb(13,"a",14),u.Ub("click",(function(){return u.gc(t),u.Wb().toggleForgotPassword(!0)})),u.kc(14),u.Xb(15,"translate"),u.Lb(),u.Lb()}if(2&e){var o=u.Wb();u.zb(3),u.cc("ngModel",o.userToLogin.email),u.zb(3),u.cc("ngModel",o.userToLogin.password),u.zb(2),u.cc("ngIf",!o.isLoading),u.zb(1),u.cc("ngIf",o.isLoading),u.zb(2),u.mc(" ",u.Yb(12,6,"login.register")," "),u.zb(3),u.lc(u.Yb(15,8,"login.forgot_password"))}}function k(e,n){if(1&e){var t=u.Nb();u.Mb(0,"div",5),u.Mb(1,"ion-item",6),u.Mb(2,"ion-label",16),u.kc(3),u.Xb(4,"translate"),u.Lb(),u.Mb(5,"ion-input",17),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToRegister.name=e})),u.Lb(),u.Lb(),u.Mb(6,"ion-item",6),u.Mb(7,"ion-label",16),u.kc(8),u.Xb(9,"translate"),u.Lb(),u.Mb(10,"ion-input",8),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToRegister.email=e})),u.Lb(),u.Lb(),u.Mb(11,"ion-item",6),u.Mb(12,"ion-label",16),u.kc(13),u.Xb(14,"translate"),u.Lb(),u.Mb(15,"ion-input",11),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToRegister.password=e})),u.Lb(),u.Lb(),u.Mb(16,"ion-item",9),u.Mb(17,"ion-label",16),u.kc(18),u.Xb(19,"translate"),u.Lb(),u.Mb(20,"ion-input",11),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToRegister.password2=e})),u.Lb(),u.Lb(),u.Mb(21,"ion-row"),u.Mb(22,"ion-col"),u.Mb(23,"ion-button",13),u.Ub("click",(function(){return u.gc(t),u.Wb().register()})),u.kc(24),u.Xb(25,"translate"),u.Lb(),u.Mb(26,"ion-button",12),u.Ub("click",(function(){return u.gc(t),u.Wb().toggleSignup(!1)})),u.kc(27),u.Xb(28,"translate"),u.Lb(),u.Lb(),u.Lb(),u.Mb(29,"p"),u.kc(30),u.Xb(31,"translate"),u.Mb(32,"a",18),u.kc(33),u.Xb(34,"translate"),u.Lb(),u.Lb(),u.Lb()}if(2&e){var o=u.Wb();u.zb(3),u.lc(u.Yb(4,12,"login.username")),u.zb(2),u.cc("ngModel",o.userToRegister.name),u.zb(3),u.lc(u.Yb(9,14,"login.email")),u.zb(2),u.cc("ngModel",o.userToRegister.email),u.zb(3),u.lc(u.Yb(14,16,"login.password")),u.zb(2),u.cc("ngModel",o.userToRegister.password),u.zb(3),u.lc(u.Yb(19,18,"login.repeat_password")),u.zb(2),u.cc("ngModel",o.userToRegister.password2),u.zb(4),u.mc("",u.Yb(25,20,"login.register")," "),u.zb(3),u.mc("",u.Yb(28,22,"login.back")," "),u.zb(3),u.mc(" ",u.Yb(31,24,"login.accept_terms")," "),u.zb(3),u.lc(u.Yb(34,26,"login.terms_and_privacy_policy"))}}function L(e,n){if(1&e){var t=u.Nb();u.Mb(0,"div",5),u.Mb(1,"ion-item",6),u.Kb(2,"ion-icon",7),u.Mb(3,"ion-input",19),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().resetEmail=e})),u.Lb(),u.Lb(),u.Mb(4,"ion-button",13),u.Ub("click",(function(){return u.gc(t),u.Wb().resetPassword()})),u.kc(5),u.Xb(6,"translate"),u.Lb(),u.Mb(7,"ion-button",12),u.Ub("click",(function(){return u.gc(t),u.Wb().toggleForgotPassword(!1)})),u.kc(8),u.Xb(9,"translate"),u.Lb(),u.Lb()}if(2&e){var o=u.Wb();u.zb(3),u.cc("ngModel",o.resetEmail),u.zb(2),u.mc(" ",u.Yb(6,3,"login.reset")," "),u.zb(3),u.mc("",u.Yb(9,5,"login.back")," ")}}var C,P,T,y=[{path:"",component:(C=function(){function e(n,t,o,r,i,s,a,c){_classCallCheck(this,e),this.translator=n,this.domCtrl=t,this.toastService=o,this.toastController=r,this.authService=i,this.httpClient=s,this.storage=a,this.router=c,this.signup=!1,this.isLoading=!1,this.forgotPassword=!1,this.userToLogin={email:null,password:null},this.userToRegister={email:null,name:null,password:null,password2:null},this.router.events.subscribe((function(e){}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.loginFailed=!1}},{key:"ngAfterContentChecked",value:function(){}},{key:"setBackground",value:function(){var e=document.querySelector(".main").shadowRoot.querySelector(".inner-scroll");this.domCtrl.write((function(){e.style.background="url('../../assets/pictures/dragon.png') top center/cover no-repeat"}))}},{key:"toggleSignup",value:function(e){this.signup=e,this.userToRegister.email=null,this.userToRegister.name=null,this.userToRegister.password=null,this.userToRegister.password2=null}},{key:"toggleForgotPassword",value:function(e){this.forgotPassword=e}},{key:"login",value:function(){var e=this;this.authService.login(this.userToLogin).subscribe((function(n){n.user.email&&(e.isLoading=!0,setTimeout((function(){e.router.navigateByUrl("tabs/welcome"),e.isLoading=!1}),1500))}),(function(n){console.log("login failed"),console.log("HTTP Error",n),e.toastService.presentToast(e.translator.instant("login.login_failed_toast"))}))}},{key:"register",value:function(){var e=this;this.authService.register(this.userToRegister).subscribe((function(n){e.signup=!1,e.userToLogin.email=e.userToRegister.email,e.userToLogin.password=e.userToRegister.password,e.login()}),(function(n){n.error.nameRequired?e.toastService.presentToast(e.translator.instant("login.register_error_name_required")):n.error.user_already_exists?e.toastService.presentToast(e.translator.instant("login.register_error_username_email_already_exists")):n.error.nameInvalid?e.toastService.presentToast(e.translator.instant("login.register_error_username_invalid")):n.error.emailRequired?e.toastService.presentToast(e.translator.instant("login.register_error_email_required")):n.error.emailInvalid?e.toastService.presentToast(e.translator.instant("login.register_error_email_invalid")):n.error.passwordRequired?e.toastService.presentToast(e.translator.instant("login.register_error_password_required")):n.error.password2Required?e.toastService.presentToast(e.translator.instant("login.register_error_password2_required")):n.error.passwordLength?e.toastService.presentToast(e.translator.instant("login.register_error_password_length")):n.error.password2Mismatch&&e.toastService.presentToast(e.translator.instant("login.register_error_password_mismatch"))}))}},{key:"resetPassword",value:function(){var e=this;/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.resetEmail)?this.APIresetPassword(this.resetEmail).subscribe((function(n){console.log(n),e.toastService.presentToast(e.translator.instant("login.reset_sent"))})):this.toastService.presentToast(this.translator.instant("login.invalid_email_error"))}},{key:"APIresetPassword",value:function(e){var n=this;return this.httpClient.get("".concat(c.a,"/users/sendResetPasswordEmail/").concat(e)).pipe(Object(b.a)((function(e){if(!e.error.emailNotFoundError)return n.toastService.presentToast(),Object(l.a)(e);n.toastService.presentToast(n.translator.instant("login.user_not_found"))})))}}]),e}(),C.\u0275fac=function(e){return new(e||C)(u.Jb(d.d),u.Jb(i.b),u.Jb(g.a),u.Jb(i.F),u.Jb(a.a),u.Jb(p.b),u.Jb(f.b),u.Jb(s.h))},C.\u0275cmp=u.Db({type:C,selectors:[["app-login"]],decls:12,vars:9,consts:[[1,"main"],[1,"login-container"],["src","../../assets/pictures/dragon_icon_login.png","alt",""],[4,"ngIf"],["class","form",4,"ngIf"],[1,"form"],["lines","full"],["slot","start","name","mail"],["type","text","required","",3,"ngModel","ngModelChange"],["lines","full",1,"round-bottom-edges"],["slot","start","name","lock-closed"],["type","password","required","",3,"ngModel","ngModelChange"],["color","dark","expand","block",3,"click"],["color","primary","expand","block",3,"click"],[1,"small-text",3,"click"],["name","dots"],["position","floating"],["maxlength","12","type","text","required","",3,"ngModel","ngModelChange"],["href","https://pdfhost.io/v/5kL2Ce7mJ_Microsoft_Word_DataProtectionPolicydocx.pdf"],["type","email","required","",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(u.Mb(0,"ion-content",0),u.Mb(1,"div",1),u.Kb(2,"img",2),u.Mb(3,"h1"),u.kc(4),u.Xb(5,"translate"),u.Lb(),u.jc(6,h,3,3,"h5",3),u.jc(7,m,3,3,"h5",3),u.jc(8,_,3,3,"h5",3),u.jc(9,w,16,10,"div",4),u.jc(10,k,35,28,"div",4),u.jc(11,L,10,7,"div",4),u.Lb(),u.Lb()),2&e&&(u.zb(4),u.lc(u.Yb(5,7,"login.appname")),u.zb(2),u.cc("ngIf",!n.signup&&!n.forgotPassword),u.zb(1),u.cc("ngIf",n.signup),u.zb(1),u.cc("ngIf",n.forgotPassword),u.zb(1),u.cc("ngIf",!n.signup&&!n.forgotPassword),u.zb(1),u.cc("ngIf",n.signup&&!n.forgotPassword),u.zb(1),u.cc("ngIf",n.forgotPassword&&!n.signup))},directives:[i.j,o.j,i.n,i.l,i.m,i.E,r.h,r.e,r.f,i.d,i.o,i.u,r.b,i.s,i.i],pipes:[d.c],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-background-darker) url(dragon_login.928a29e0c3fdecdd7c0a.png) top center/cover no-repeat}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{color:#f5f5f5;text-align:center}ion-icon[_ngcontent-%COMP%]{color:#f5f5f5}.form[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-dark)}.small-text[_ngcontent-%COMP%]{color:grey}.lowercase[_ngcontent-%COMP%]{text-transform:lowercase}.login-container[_ngcontent-%COMP%]{padding-left:7%;padding-right:7%;padding-top:4rem}img[_ngcontent-%COMP%]{width:30%;display:block;margin-left:auto;margin-right:auto}ion-item[_ngcontent-%COMP%]:first-child{border-top-left-radius:5px;border-top-right-radius:5px}ion-item.round-bottom-edges[_ngcontent-%COMP%]{border-bottom-left-radius:5px;border-bottom-right-radius:5px}ion-input[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]{--color:#f5f5f5!important}a[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#969696}"]}),C)}],z=((T=function e(){_classCallCheck(this,e)}).\u0275mod=u.Hb({type:T}),T.\u0275inj=u.Gb({factory:function(e){return new(e||T)},imports:[[s.j.forChild(y)],s.j]}),T),R=((P=function e(){_classCallCheck(this,e)}).\u0275mod=u.Hb({type:P}),P.\u0275inj=u.Gb({factory:function(e){return new(e||P)},imports:[[o.b,r.a,r.g,i.y,z,d.b.forChild()]]}),P)}}]);
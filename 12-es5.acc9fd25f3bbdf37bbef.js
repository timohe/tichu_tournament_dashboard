function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"V/gd":function(t,e,n){"use strict";n.r(e),n.d(e,"TournamentDashboardPageModule",(function(){return Q}));var o,a=n("ofXK"),r=n("3Pt+"),i=n("TEn/"),s=n("sYmb"),c=n("tyNb"),l=n("z6cu"),b=(n("t4lL"),n("AytR")),u=n("JIr8"),m=n("mrSG"),p=n("fXoL"),f=((o=function(){function t(e){_classCallCheck(this,t),this.toastController=e}return _createClass(t,[{key:"presentToast",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong.";return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({message:t,duration:4e3,position:"top"});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(t){return new(t||o)(p.Tb(i.u))},o.\u0275prov=p.Hb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),d=n("tk/3");function g(t,e){if(1&t&&(p.Qb(0,"ion-label"),p.pc(1),p.Pb()),2&t){var n=p.Zb(),o=n.index,a=n.$implicit,r=p.Zb(2);p.Bb(1),p.sc(" ",r.rankings[o],". ",null==a?null:a.name," ")}}function h(t,e){if(1&t&&(p.Qb(0,"ion-item",5),p.oc(1,g,2,2,"ion-label",3),p.Qb(2,"ion-note",6),p.pc(3),p.Pb(),p.Pb()),2&t){var n=e.$implicit,o=p.Zb(2);p.Bb(1),p.ec("ngIf",o.rankings),p.Bb(2),p.sc(" ",n[o.propertyName],"",o.showPercentage," ")}}function v(t,e){if(1&t&&(p.Qb(0,"ion-list"),p.oc(1,h,4,3,"ion-item",4),p.Pb()),2&t){var n=p.Zb();p.Bb(1),p.ec("ngForOf",n.statsToShow)}}var P,y=((P=function(){function t(){_classCallCheck(this,t),this.statsToShow=[],this.showExplanation=!1}return _createClass(t,[{key:"ngOnChanges",value:function(){this.refreshStatsToShow()}},{key:"refreshStatsToShow",value:function(){if(this.bestList){this.statsToShow=[],this.rankings=[];for(var t=this.bestList[this.propertyName],e=0;e<t.length;e++)e<3&&(this.statsToShow.push(t[e]),this.rankings.push(e+1));this.allowSameRanks()}}},{key:"allowSameRanks",value:function(){var t,e=[],n=_createForOfIteratorHelper(this.statsToShow);try{for(n.s();!(t=n.n()).done;){var o=t.value;e.push(o[this.propertyName])}}catch(i){n.e(i)}finally{n.f()}for(var a=null,r=0;r<e.length;r++)a===e[r]&&(this.rankings[r]=this.rankings[r-1]),a=e[r]}}]),t}()).\u0275fac=function(t){return new(t||P)},P.\u0275cmp=p.Fb({type:P,selectors:[["app-tournament-dashboard-tile"]],inputs:{propertyName:"propertyName",statName:"statName",showPercentage:"showPercentage",bestList:"bestList"},features:[p.zb],decls:8,vars:3,consts:[[1,"top"],["alt","",3,"src"],[1,"wrapper"],[4,"ngIf"],["lines","none","detail","false",4,"ngFor","ngForOf"],["lines","none","detail","false"],["slot","end"]],template:function(t,e){1&t&&(p.Qb(0,"ion-card"),p.Qb(1,"ion-card-header",0),p.Mb(2,"img",1),p.Qb(3,"div",2),p.Qb(4,"ion-card-title"),p.pc(5),p.Pb(),p.Pb(),p.Pb(),p.Qb(6,"ion-card-content"),p.oc(7,v,2,1,"ion-list",3),p.Pb(),p.Pb()),2&t&&(p.Bb(2),p.fc("src","../../assets/icon/stats/"+e.propertyName+".svg",p.lc),p.Bb(3),p.qc(e.statName),p.Bb(2),p.ec("ngIf",e.statsToShow.length>0))},directives:[i.d,i.f,i.g,i.e,a.j,i.n,a.i,i.l,i.o,i.m],styles:["ion-card[_ngcontent-%COMP%]{max-width:300px}.top[_ngcontent-%COMP%]{position:relative;height:11rem;overflow:hidden;background-size:cover;background-position:50%;text-align:center;z-index:1;color:#000;background-color:#f5f5f5}ion-item[_ngcontent-%COMP%]{max-height:2.5rem!important;--inner-padding-start:0px!important;--inner-padding-end:0px!important;--padding-start:0px!important;--padding-end:0px!important;--min-height:1.8rem!important}ion-card-subtitle[_ngcontent-%COMP%]{margin-top:.2rem;margin-bottom:.2rem;color:#000;font-size:.7rem!important}ion-card-title[_ngcontent-%COMP%]{color:#000;font-size:2rem!important;font-weight:400}.no-margins[_ngcontent-%COMP%]{margin:0;padding:0}ion-note[_ngcontent-%COMP%]{top:.2rem;position:relative;color:var(--ion-color-primary)}ion-label[_ngcontent-%COMP%], ion-note[_ngcontent-%COMP%]{padding:0!important;margin:0!important;font-size:1.5rem!important}img[_ngcontent-%COMP%]{width:32%;display:block;margin:0 auto .7rem}"]}),P);function w(t,e){1&t&&p.Mb(0,"ion-icon",5)}function k(t,e){1&t&&p.Mb(0,"ion-icon",6)}function C(t,e){if(1&t&&(p.Qb(0,"div"),p.Qb(1,"h1"),p.pc(2),p.Pb(),p.Qb(3,"ion-grid"),p.Qb(4,"ion-row"),p.Qb(5,"ion-col",7),p.Mb(6,"app-tournament-dashboard-tile",8),p.ac(7,"translate"),p.Pb(),p.Qb(8,"ion-col",7),p.Mb(9,"app-tournament-dashboard-tile",9),p.ac(10,"translate"),p.Pb(),p.Qb(11,"ion-col",7),p.Mb(12,"app-tournament-dashboard-tile",10),p.ac(13,"translate"),p.Pb(),p.Qb(14,"ion-col",7),p.Mb(15,"app-tournament-dashboard-tile",11),p.ac(16,"translate"),p.Pb(),p.Qb(17,"ion-col",7),p.Mb(18,"app-tournament-dashboard-tile",12),p.ac(19,"translate"),p.Pb(),p.Qb(20,"ion-col",7),p.Mb(21,"app-tournament-dashboard-tile",13),p.ac(22,"translate"),p.Pb(),p.Qb(23,"ion-col",7),p.Mb(24,"app-tournament-dashboard-tile",14),p.ac(25,"translate"),p.Pb(),p.Qb(26,"ion-col",7),p.Mb(27,"app-tournament-dashboard-tile",15),p.ac(28,"translate"),p.Pb(),p.Pb(),p.Pb(),p.Pb()),2&t){var n=p.Zb();p.Bb(2),p.qc(n.tournamentName),p.Bb(4),p.fc("statName",p.bc(7,17,"statistics.tichuMaster")),p.ec("bestList",n.activeTournamentBestlist),p.Bb(3),p.fc("statName",p.bc(10,19,"statistics.tichuAnnouncedWhen1stRate")),p.ec("bestList",n.activeTournamentBestlist),p.Bb(3),p.fc("statName",p.bc(13,21,"statistics.winRate")),p.ec("bestList",n.activeTournamentBestlist),p.Bb(3),p.fc("statName",p.bc(16,23,"statistics.bombRate")),p.ec("bestList",n.activeTournamentBestlist),p.Bb(3),p.fc("statName",p.bc(19,25,"statistics.doubleWinRate")),p.ec("bestList",n.activeTournamentBestlist),p.Bb(3),p.fc("statName",p.bc(22,27,"statistics.tichuPreventedRate")),p.ec("bestList",n.activeTournamentBestlist),p.Bb(3),p.fc("statName",p.bc(25,29,"statistics.tichuSuccessRate")),p.ec("bestList",n.activeTournamentBestlist),p.Bb(3),p.fc("statName",p.bc(28,31,"statistics.bigTichuSuccessRate")),p.ec("bestList",n.activeTournamentBestlist)}}function _(t,e){if(1&t&&(p.Qb(0,"ion-item",25),p.Qb(1,"ion-label"),p.pc(2),p.Pb(),p.Qb(3,"ion-label",19),p.pc(4),p.Pb(),p.Qb(5,"ion-label",20),p.pc(6),p.Pb(),p.Qb(7,"ion-label",21),p.pc(8),p.Pb(),p.Pb()),2&t){var n=e.$implicit,o=e.index,a=p.Zb(3);p.Bb(2),p.rc(" ",o+1,". "),p.Bb(2),p.tc(" ",n.player1Name," ",a.teamGameAndSymbol," ",n.player2Name," "),p.Bb(2),p.rc(" ",n.winpointsPerRound," "),p.Bb(2),p.rc(" ",n.pointDifference," ")}}function M(t,e){if(1&t&&(p.Qb(0,"div",23),p.oc(1,_,9,6,"ion-item",24),p.Pb()),2&t){var n=p.Zb(2);p.Bb(1),p.ec("ngForOf",n.activeTournamentRanking)}}function O(t,e){if(1&t&&(p.Qb(0,"div"),p.Qb(1,"h1"),p.pc(2,"Leaderboard"),p.Pb(),p.Qb(3,"div",16),p.Qb(4,"ion-item",17),p.Qb(5,"ion-label",18),p.pc(6," Rank "),p.Pb(),p.Qb(7,"ion-label",19),p.pc(8," Users "),p.Pb(),p.Qb(9,"ion-label",20),p.pc(10," Winpoints/Round "),p.Pb(),p.Qb(11,"ion-label",21),p.pc(12," Point-Difference "),p.Pb(),p.Pb(),p.oc(13,M,2,1,"div",22),p.Pb(),p.Pb()),2&t){var n=p.Zb();p.Bb(13),p.ec("ngIf",n.activeTournamentRanking)}}var N,T,L,B=[{path:"",component:(N=function(){function t(e,n,o,a,r){_classCallCheck(this,t),this.route=e,this.translator=n,this.toastService=o,this.httpClient=a,this.toastController=r,this.activeTournamentBestlist=null,this.activeTournamentRanking=null}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.queryParams.subscribe((function(e){e&&(t.tournamentName=e.tournamentName,t.refreshActiveTournament(t.tournamentName),setInterval((function(){t.refreshActiveTournament(t.tournamentName)}),3e4))}))}},{key:"refreshActiveTournament",value:function(t){var e=this;this.APIGetTournamentBestlistByName(t).subscribe((function(t){e.activeTournamentBestlist=t})),this.APIGetTournamentRanking(t).subscribe((function(t){e.activeTournamentRanking=t,t[0].player2Id&&(e.teamGameAndSymbol="&")}))}},{key:"toggleShowLeaderboard",value:function(){this.showLeaderboard=!this.showLeaderboard}},{key:"APIGetTournamentBestlistByName",value:function(t){var e=this;return this.httpClient.get("".concat(b.a,"/tournament/tournamentBestListbyName/").concat(t)).pipe(Object(u.a)((function(t){return e.toastService.presentToast(),Object(l.a)(t)})))}},{key:"APIGetTournamentRanking",value:function(t){var e=this;return this.httpClient.get("".concat(b.a,"/tournament/ranking/").concat(t)).pipe(Object(u.a)((function(t){return e.toastService.presentToast(),Object(l.a)(t)})))}}]),t}(),N.\u0275fac=function(t){return new(t||N)(p.Lb(c.a),p.Lb(s.d),p.Lb(f),p.Lb(d.b),p.Lb(i.u))},N.\u0275cmp=p.Fb({type:N,selectors:[["app-tournament-dashboard"]],decls:7,vars:4,consts:[[1,"top-spacer"],[1,"leaderboard-toggle",3,"click"],["class","toggle-icon","name","trophy",4,"ngIf"],["class","toggle-icon","name","podium",4,"ngIf"],[4,"ngIf"],["name","trophy",1,"toggle-icon"],["name","podium",1,"toggle-icon"],["sizeLg","3","sizeMd","4","sizeXs","6"],["propertyName","tichuMaster","showPercentage","",3,"statName","bestList"],["propertyName","tichuAnnouncedWhen1stRate","showPercentage","%",3,"bestList","statName"],["showPercentage","%","propertyName","winRate",3,"bestList","statName"],["showPercentage","%","propertyName","bombRate",3,"bestList","statName"],["showPercentage","%","propertyName","doubleWinRate",3,"bestList","statName"],["showPercentage","%","propertyName","tichuPreventedRate",3,"bestList","statName"],["showPercentage","%","propertyName","tichuSuccessRate",3,"bestList","statName"],["howPercentage","%","propertyName","bigTichuSuccessRate",3,"bestList","statName"],[1,"leaderboard-container"],["lines","none","detail","false",1,"leaderboard","header"],[1,"rank"],[1,"users"],[1,"winpoints"],[1,"difference"],["class","leaderboard list",4,"ngIf"],[1,"leaderboard","list"],["lines","none","detail","false",4,"ngFor","ngForOf"],["lines","none","detail","false"]],template:function(t,e){1&t&&(p.Qb(0,"ion-content"),p.Mb(1,"div",0),p.Qb(2,"ion-button",1),p.Xb("click",(function(){return e.toggleShowLeaderboard()})),p.oc(3,w,1,0,"ion-icon",2),p.oc(4,k,1,0,"ion-icon",3),p.Pb(),p.oc(5,C,29,33,"div",4),p.oc(6,O,14,1,"div",4),p.Pb()),2&t&&(p.Bb(3),p.ec("ngIf",!e.showLeaderboard),p.Bb(1),p.ec("ngIf",e.showLeaderboard),p.Bb(1),p.ec("ngIf",!e.showLeaderboard),p.Bb(1),p.ec("ngIf",e.showLeaderboard))},directives:[i.i,i.c,a.j,i.k,i.j,i.q,i.h,y,i.l,i.m,a.i],pipes:[s.c],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-background)}h1[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-align:center;vertical-align:center!important;margin:0;font-size:4em}.leaderboard-toggle[_ngcontent-%COMP%]{position:absolute;right:15%;width:5em;height:5em;text-align:center}.toggle-icon[_ngcontent-%COMP%]{font-size:4em}.leaderboard-container[_ngcontent-%COMP%]{margin-top:4em;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;flex-wrap:nowrap;-webkit-box-align:center;align-items:center;align-content:stretch;height:90vh}.leaderboard[_ngcontent-%COMP%]{width:70%}.rank[_ngcontent-%COMP%]{-webkit-box-flex:1;flex-grow:1}.users[_ngcontent-%COMP%]{-webkit-box-flex:5;flex-grow:5}.difference[_ngcontent-%COMP%], .winpoints[_ngcontent-%COMP%]{-webkit-box-flex:3;flex-grow:3}.list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:first-child{--background:#ffe460;color:#000}.list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:nth-child(2){--background:#b5b3b3;color:#000}.list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:nth-child(3){--background:#cd7f32;color:#000}.header[_ngcontent-%COMP%]{--background:var(--ion-color-background);color:#fff;margin-top:.3rem;border-radius:8px 8px 8px 8px;--border-color:hsla(0,0%,100%,0.9);--color-hover:#fff!important;--color-activated:#fff!important;--color-focused:#fff!important}ion-label[_ngcontent-%COMP%]{font-size:1.5rem!important;padding:0!important;margin:0!important}h2[_ngcontent-%COMP%]{text-align:center;vertical-align:center!important;margin:0 0 0 5%}"]}),N)}],x=((L=function t(){_classCallCheck(this,t)}).\u0275mod=p.Jb({type:L}),L.\u0275inj=p.Ib({factory:function(t){return new(t||L)},imports:[[c.i.forChild(B)],c.i]}),L),Q=((T=function t(){_classCallCheck(this,t)}).\u0275mod=p.Jb({type:T}),T.\u0275inj=p.Ib({factory:function(t){return new(t||T)},imports:[[a.b,r.a,i.r,x,s.b.forChild()]]}),T)},t4lL:function(t,e){}}]);
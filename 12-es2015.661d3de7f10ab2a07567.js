(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{X3zk:function(t,e,n){"use strict";n.r(e),n.d(e,"LoginPageModule",(function(){return C}));var o=n("ofXK"),r=n("3Pt+"),i=n("TEn/"),s=n("tyNb"),a=n("sV9K"),l=n("AytR"),c=n("z6cu"),b=n("JIr8"),g=n("NEhk"),u=n("fXoL"),d=n("sYmb"),p=n("tk/3"),h=n("e8h1");function m(t,e){1&t&&(u.Mb(0,"h5"),u.kc(1),u.Xb(2,"translate"),u.Lb()),2&t&&(u.zb(1),u.lc(u.Yb(2,1,"login.good_to_have_you_here")))}function f(t,e){1&t&&(u.Mb(0,"h5"),u.kc(1),u.Xb(2,"translate"),u.Lb()),2&t&&(u.zb(1),u.lc(u.Yb(2,1,"login.lets_get_started")))}function M(t,e){1&t&&(u.Mb(0,"h5"),u.kc(1),u.Xb(2,"translate"),u.Lb()),2&t&&(u.zb(1),u.lc(u.Yb(2,1,"login.no_worries")))}function _(t,e){1&t&&(u.Mb(0,"ion-label"),u.kc(1),u.Xb(2,"translate"),u.Lb()),2&t&&(u.zb(1),u.mc(" ",u.Yb(2,1,"login.sign_in")," "))}function w(t,e){1&t&&(u.Mb(0,"ion-label"),u.Kb(1,"ion-spinner",15),u.Lb())}function L(t,e){if(1&t){const t=u.Nb();u.Mb(0,"div",5),u.Mb(1,"ion-item",6),u.Kb(2,"ion-icon",7),u.Mb(3,"ion-input",8),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToLogin.email=e})),u.Lb(),u.Lb(),u.Mb(4,"ion-item",9),u.Kb(5,"ion-icon",10),u.Mb(6,"ion-input",11),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToLogin.password=e})),u.Lb(),u.Lb(),u.Mb(7,"ion-button",12),u.Ub("click",(function(){return u.gc(t),u.Wb().login()})),u.jc(8,_,3,3,"ion-label",3),u.jc(9,w,2,0,"ion-label",3),u.Lb(),u.Mb(10,"ion-button",13),u.Ub("click",(function(){return u.gc(t),u.Wb().toggleSignup(!0)})),u.kc(11),u.Xb(12,"translate"),u.Lb(),u.Mb(13,"a",14),u.Ub("click",(function(){return u.gc(t),u.Wb().toggleForgotPassword(!0)})),u.kc(14),u.Xb(15,"translate"),u.Lb(),u.Lb()}if(2&t){const t=u.Wb();u.zb(3),u.cc("ngModel",t.userToLogin.email),u.zb(3),u.cc("ngModel",t.userToLogin.password),u.zb(2),u.cc("ngIf",!t.isLoading),u.zb(1),u.cc("ngIf",t.isLoading),u.zb(2),u.mc(" ",u.Yb(12,6,"login.register")," "),u.zb(3),u.lc(u.Yb(15,8,"login.forgot_password"))}}function k(t,e){if(1&t){const t=u.Nb();u.Mb(0,"div",5),u.Mb(1,"ion-item",6),u.Mb(2,"ion-label",16),u.kc(3),u.Xb(4,"translate"),u.Lb(),u.Mb(5,"ion-input",17),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToRegister.name=e})),u.Lb(),u.Lb(),u.Mb(6,"ion-item",6),u.Mb(7,"ion-label",16),u.kc(8),u.Xb(9,"translate"),u.Lb(),u.Mb(10,"ion-input",8),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToRegister.email=e})),u.Lb(),u.Lb(),u.Mb(11,"ion-item",6),u.Mb(12,"ion-label",16),u.kc(13),u.Xb(14,"translate"),u.Lb(),u.Mb(15,"ion-input",11),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToRegister.password=e})),u.Lb(),u.Lb(),u.Mb(16,"ion-item",9),u.Mb(17,"ion-label",16),u.kc(18),u.Xb(19,"translate"),u.Lb(),u.Mb(20,"ion-input",11),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().userToRegister.password2=e})),u.Lb(),u.Lb(),u.Mb(21,"ion-row"),u.Mb(22,"ion-col"),u.Mb(23,"ion-button",13),u.Ub("click",(function(){return u.gc(t),u.Wb().register()})),u.kc(24),u.Xb(25,"translate"),u.Lb(),u.Mb(26,"ion-button",12),u.Ub("click",(function(){return u.gc(t),u.Wb().toggleSignup(!1)})),u.kc(27),u.Xb(28,"translate"),u.Lb(),u.Lb(),u.Lb(),u.Mb(29,"p"),u.kc(30),u.Xb(31,"translate"),u.Mb(32,"a",18),u.kc(33),u.Xb(34,"translate"),u.Lb(),u.Lb(),u.Lb()}if(2&t){const t=u.Wb();u.zb(3),u.lc(u.Yb(4,12,"login.username")),u.zb(2),u.cc("ngModel",t.userToRegister.name),u.zb(3),u.lc(u.Yb(9,14,"login.email")),u.zb(2),u.cc("ngModel",t.userToRegister.email),u.zb(3),u.lc(u.Yb(14,16,"login.password")),u.zb(2),u.cc("ngModel",t.userToRegister.password),u.zb(3),u.lc(u.Yb(19,18,"login.repeat_password")),u.zb(2),u.cc("ngModel",t.userToRegister.password2),u.zb(4),u.mc("",u.Yb(25,20,"login.register")," "),u.zb(3),u.mc("",u.Yb(28,22,"login.back")," "),u.zb(3),u.mc(" ",u.Yb(31,24,"login.accept_terms")," "),u.zb(3),u.lc(u.Yb(34,26,"login.terms_and_privacy_policy"))}}function v(t,e){if(1&t){const t=u.Nb();u.Mb(0,"div",5),u.Mb(1,"ion-item",6),u.Kb(2,"ion-icon",7),u.Mb(3,"ion-input",19),u.Ub("ngModelChange",(function(e){return u.gc(t),u.Wb().resetEmail=e})),u.Lb(),u.Lb(),u.Mb(4,"ion-button",13),u.Ub("click",(function(){return u.gc(t),u.Wb().resetPassword()})),u.kc(5),u.Xb(6,"translate"),u.Lb(),u.Mb(7,"ion-button",12),u.Ub("click",(function(){return u.gc(t),u.Wb().toggleForgotPassword(!1)})),u.kc(8),u.Xb(9,"translate"),u.Lb(),u.Lb()}if(2&t){const t=u.Wb();u.zb(3),u.cc("ngModel",t.resetEmail),u.zb(2),u.mc(" ",u.Yb(6,3,"login.reset")," "),u.zb(3),u.mc("",u.Yb(9,5,"login.back")," ")}}const T=[{path:"",component:(()=>{class t{constructor(t,e,n,o,r,i,s,a){this.translator=t,this.domCtrl=e,this.toastService=n,this.toastController=o,this.authService=r,this.httpClient=i,this.storage=s,this.router=a,this.signup=!1,this.isLoading=!1,this.forgotPassword=!1,this.userToLogin={email:null,password:null},this.userToRegister={email:null,name:null,password:null,password2:null},this.router.events.subscribe(t=>{})}ngOnInit(){this.loginFailed=!1}ngAfterContentChecked(){}setBackground(){const t=document.querySelector(".main").shadowRoot.querySelector(".inner-scroll");this.domCtrl.write(()=>{t.style.background="url('../../assets/pictures/dragon.png') top center/cover no-repeat"})}toggleSignup(t){this.signup=t,this.userToRegister.email=null,this.userToRegister.name=null,this.userToRegister.password=null,this.userToRegister.password2=null}toggleForgotPassword(t){this.forgotPassword=t}login(){this.authService.login(this.userToLogin).subscribe(t=>{t.user.email&&(this.isLoading=!0,setTimeout(()=>{this.router.navigateByUrl("tabs/welcome"),this.isLoading=!1},1500))},t=>{console.log("login failed"),console.log("HTTP Error",t),this.toastService.presentToast(this.translator.instant("login.login_failed_toast"))})}register(){this.authService.register(this.userToRegister).subscribe(t=>{this.signup=!1,this.userToLogin.email=this.userToRegister.email,this.userToLogin.password=this.userToRegister.password,this.login()},t=>{t.error.nameRequired?this.toastService.presentToast(this.translator.instant("login.register_error_name_required")):t.error.user_already_exists?this.toastService.presentToast(this.translator.instant("login.register_error_username_email_already_exists")):t.error.nameInvalid?this.toastService.presentToast(this.translator.instant("login.register_error_username_invalid")):t.error.emailRequired?this.toastService.presentToast(this.translator.instant("login.register_error_email_required")):t.error.emailInvalid?this.toastService.presentToast(this.translator.instant("login.register_error_email_invalid")):t.error.passwordRequired?this.toastService.presentToast(this.translator.instant("login.register_error_password_required")):t.error.password2Required?this.toastService.presentToast(this.translator.instant("login.register_error_password2_required")):t.error.passwordLength?this.toastService.presentToast(this.translator.instant("login.register_error_password_length")):t.error.password2Mismatch&&this.toastService.presentToast(this.translator.instant("login.register_error_password_mismatch"))})}resetPassword(){/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.resetEmail)?this.APIresetPassword(this.resetEmail).subscribe(t=>{console.log(t),this.toastService.presentToast(this.translator.instant("login.reset_sent"))}):this.toastService.presentToast(this.translator.instant("login.invalid_email_error"))}APIresetPassword(t){return this.httpClient.get(`${l.a}/users/sendResetPasswordEmail/${t}`).pipe(Object(b.a)(t=>{if(!t.error.emailNotFoundError)return this.toastService.presentToast(),Object(c.a)(t);this.toastService.presentToast(this.translator.instant("login.user_not_found"))}))}}return t.\u0275fac=function(e){return new(e||t)(u.Jb(d.d),u.Jb(i.b),u.Jb(g.a),u.Jb(i.F),u.Jb(a.a),u.Jb(p.b),u.Jb(h.b),u.Jb(s.h))},t.\u0275cmp=u.Db({type:t,selectors:[["app-login"]],decls:12,vars:9,consts:[[1,"main"],[1,"login-container"],["src","../../assets/pictures/dragon_icon_login.png","alt",""],[4,"ngIf"],["class","form",4,"ngIf"],[1,"form"],["lines","full"],["slot","start","name","mail"],["type","text","required","",3,"ngModel","ngModelChange"],["lines","full",1,"round-bottom-edges"],["slot","start","name","lock-closed"],["type","password","required","",3,"ngModel","ngModelChange"],["color","dark","expand","block",3,"click"],["color","primary","expand","block",3,"click"],[1,"small-text",3,"click"],["name","dots"],["position","floating"],["maxlength","12","type","text","required","",3,"ngModel","ngModelChange"],["href","https://pdfhost.io/v/5kL2Ce7mJ_Microsoft_Word_DataProtectionPolicydocx.pdf"],["type","email","required","",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(u.Mb(0,"ion-content",0),u.Mb(1,"div",1),u.Kb(2,"img",2),u.Mb(3,"h1"),u.kc(4),u.Xb(5,"translate"),u.Lb(),u.jc(6,m,3,3,"h5",3),u.jc(7,f,3,3,"h5",3),u.jc(8,M,3,3,"h5",3),u.jc(9,L,16,10,"div",4),u.jc(10,k,35,28,"div",4),u.jc(11,v,10,7,"div",4),u.Lb(),u.Lb()),2&t&&(u.zb(4),u.lc(u.Yb(5,7,"login.appname")),u.zb(2),u.cc("ngIf",!e.signup&&!e.forgotPassword),u.zb(1),u.cc("ngIf",e.signup),u.zb(1),u.cc("ngIf",e.forgotPassword),u.zb(1),u.cc("ngIf",!e.signup&&!e.forgotPassword),u.zb(1),u.cc("ngIf",e.signup&&!e.forgotPassword),u.zb(1),u.cc("ngIf",e.forgotPassword&&!e.signup))},directives:[i.j,o.j,i.n,i.l,i.m,i.E,r.h,r.e,r.f,i.d,i.o,i.u,r.b,i.s,i.i],pipes:[d.c],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-background-darker) url(dragon_login.928a29e0c3fdecdd7c0a.png) top center/cover no-repeat}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{color:#f5f5f5;text-align:center}ion-icon[_ngcontent-%COMP%]{color:#f5f5f5}.form[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-dark)}.small-text[_ngcontent-%COMP%]{color:grey}.lowercase[_ngcontent-%COMP%]{text-transform:lowercase}.login-container[_ngcontent-%COMP%]{padding-left:7%;padding-right:7%;padding-top:4rem}img[_ngcontent-%COMP%]{width:30%;display:block;margin-left:auto;margin-right:auto}ion-item[_ngcontent-%COMP%]:first-child{border-top-left-radius:5px;border-top-right-radius:5px}ion-item.round-bottom-edges[_ngcontent-%COMP%]{border-bottom-left-radius:5px;border-bottom-right-radius:5px}ion-input[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]{--color:#f5f5f5!important}a[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#969696}"]}),t})()}];let P=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)},imports:[[s.j.forChild(T)],s.j]}),t})(),C=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)},imports:[[o.b,r.a,r.g,i.y,P,d.b.forChild()]]}),t})()}}]);
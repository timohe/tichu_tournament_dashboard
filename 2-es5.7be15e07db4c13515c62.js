function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{AMPi:function(e,t,n){"use strict";n.r(t),n.d(t,"TournamentsPageModule",(function(){return S}));var a=n("ofXK"),o=n("3Pt+"),r=n("sYmb"),i=n("TEn/"),s=n("tyNb"),c=n("mrSG"),l=n("z6cu"),b=(n("t4lL"),n("AytR")),u=n("JIr8"),m=n("NEhk"),d=n("q7q9"),p=n("gcOT"),g=n("fXoL"),h=n("tk/3");function f(e,t){if(1&e&&(g.Mb(0,"div",6),g.Mb(1,"ion-card-title"),g.kc(2),g.Lb(),g.Lb()),2&e){var n=g.Wb();g.zb(2),g.lc(n.statName)}}function v(e,t){if(1&e&&(g.Mb(0,"div",6),g.Mb(1,"p",7),g.kc(2),g.Lb(),g.Lb()),2&e){var n=g.Wb();g.zb(2),g.lc(n.explanation)}}function y(e,t){if(1&e&&(g.Mb(0,"ion-label"),g.kc(1),g.Lb()),2&e){var n=g.Wb(),a=n.index,o=n.$implicit,r=g.Wb(2);g.zb(1),g.nc(" ",r.rankings[a],". ",null==o?null:o.name," ")}}function P(e,t){if(1&e){var n=g.Nb();g.Mb(0,"ion-item",9),g.Ub("click",(function(){g.gc(n);var e=t.$implicit;return g.Wb(2).deleteComparison(null==e?null:e.name)})),g.jc(1,y,2,2,"ion-label",3),g.Mb(2,"ion-note",10),g.kc(3),g.Lb(),g.Lb()}if(2&e){var a=t.$implicit,o=t.index,r=g.Wb(2);g.cc("ngClass",3==o?"comparison-border":""),g.zb(1),g.cc("ngIf",r.rankings),g.zb(2),g.nc(" ",a[r.propertyName],"",r.showPercentage," ")}}function C(e,t){if(1&e&&(g.Mb(0,"ion-list"),g.jc(1,P,4,4,"ion-item",8),g.Lb()),2&e){var n=g.Wb();g.zb(1),g.cc("ngForOf",n.statsToShow)}}var M,N=((M=function(){function e(){_classCallCheck(this,e),this.deleteComparisonUserEvent=new g.n,this.openComparisonUserEvent=new g.n,this.statsToShow=[],this.showExplanation=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){this.refreshStatsToShow()}},{key:"deleteComparison",value:function(e){this.deleteComparisonUserEvent.next(e)}},{key:"openComparison",value:function(){this.openComparisonUserEvent.next("openComparisonEvent")}},{key:"toggleExplanation",value:function(){this.showExplanation=!this.showExplanation}},{key:"refreshStatsToShow",value:function(){if(this.bestList){this.statsToShow=[],this.rankings=[];var e=this.bestList[this.propertyName];this.totalPlayers=e.length;for(var t=0;t<e.length;t++)t<3&&(this.statsToShow.push(e[t]),this.rankings.push(t+1)),this.loggedInPlayerName===e[t].name&&(this.statsOfLoggedInPlayer=e[t],this.rankOfLoggedInPlayer=t+1);for(var n=0;n<e.length;n++)this.additionalPlayerNames.includes(e[n].name)&&(this.statsToShow.push(e[n]),this.rankings.push(n+1))}}},{key:"getClass",value:function(){return{"background-color":"#ffe460"}}}]),e}()).\u0275fac=function(e){return new(e||M)},M.\u0275cmp=g.Db({type:M,selectors:[["app-tournament-tile"]],inputs:{propertyName:"propertyName",statName:"statName",explanation:"explanation",showPercentage:"showPercentage",bestList:"bestList",additionalPlayerNames:"additionalPlayerNames",loggedInPlayerName:"loggedInPlayerName"},outputs:{deleteComparisonUserEvent:"deleteComparisonUserEvent",openComparisonUserEvent:"openComparisonUserEvent"},features:[g.xb],decls:9,vars:5,consts:[[1,"top",3,"ngStyle","click"],["alt","",3,"src"],["class","wrapper",4,"ngIf"],[4,"ngIf"],[1,"compare",3,"click"],["name","add"],[1,"wrapper"],[1,"explanation"],["detail","false","button","",3,"ngClass","click",4,"ngFor","ngForOf"],["detail","false","button","",3,"ngClass","click"],["slot","end"]],template:function(e,t){1&e&&(g.Mb(0,"ion-card"),g.Mb(1,"ion-card-header",0),g.Ub("click",(function(){return t.toggleExplanation()})),g.Kb(2,"img",1),g.jc(3,f,3,1,"div",2),g.jc(4,v,3,1,"div",2),g.Lb(),g.Mb(5,"ion-card-content"),g.jc(6,C,2,1,"ion-list",3),g.Lb(),g.Mb(7,"div",4),g.Ub("click",(function(){return t.openComparison()})),g.Kb(8,"ion-icon",5),g.Lb(),g.Lb()),2&e&&(g.zb(1),g.cc("ngStyle",t.getClass()),g.zb(1),g.dc("src","../../assets/icon/stats/"+t.propertyName+".svg",g.hc),g.zb(1),g.cc("ngIf",!t.showExplanation),g.zb(1),g.cc("ngIf",t.showExplanation),g.zb(2),g.cc("ngIf",t.statsToShow.length>0))},directives:[i.e,i.g,a.k,a.j,i.f,i.l,i.h,i.p,a.i,i.n,a.h,i.q,i.o],styles:[".top[_ngcontent-%COMP%]{position:relative;overflow:visible;background:var(--ion-color-secondary);background-size:cover;background-position:50%;text-align:center;z-index:1;color:#000}.explanation[_ngcontent-%COMP%]{font-size:.9rem}ion-item[_ngcontent-%COMP%]{font-size:2 rem!important;--border-width:0;--inner-border-width:0;max-height:2.5rem!important;--inner-padding-start:0px!important;--inner-padding-end:0px!important;--padding-start:0px!important;--padding-end:0px!important;--min-height:1.8rem!important}.comparison-border[_ngcontent-%COMP%]{--inner-border-width:1px 0 0 0}ion-card-subtitle[_ngcontent-%COMP%]{margin-top:.2rem;margin-bottom:.2rem;color:#000;font-size:.7rem!important}ion-card-title[_ngcontent-%COMP%]{color:#000;font-size:.1 rem!important;font-weight:400}.top[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{margin-top:0;display:inline-block;font-size:1.2rem;font-weight:400}ion-card-content[_ngcontent-%COMP%]{padding-bottom:.1rem;padding-top:.1rem;padding-right:.8rem!important;padding-left:.8rem!important}ion-note[_ngcontent-%COMP%]{top:.2rem;position:relative;font-size:.9rem!important;color:var(--ion-color-primary)}ion-label[_ngcontent-%COMP%], ion-note[_ngcontent-%COMP%]{padding:0!important;margin:0!important}.plus[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]{font-size:1rem!important}.compare[_ngcontent-%COMP%]{background-color:var(--ion-color-primary-gradient);color:var(--ion-color-primary);display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;font-size:1.8rem;padding:0}img[_ngcontent-%COMP%]{width:25%;display:block;margin:0 auto .7rem}"]}),M);function k(e,t){if(1&e&&(g.Mb(0,"ion-item",14),g.Kb(1,"div",15),g.Mb(2,"ion-label"),g.kc(3),g.Lb(),g.Lb()),2&e){var n=t.$implicit;g.zb(3),g.mc(" ",n," ")}}function L(e,t){if(1&e){var n=g.Nb();g.Mb(0,"ion-card"),g.Mb(1,"ion-card-header"),g.Mb(2,"ion-card-title"),g.kc(3),g.Xb(4,"translate"),g.Lb(),g.Mb(5,"ion-button",12),g.Ub("click",(function(){return g.gc(n),g.Wb(2).shareTournamentKey()})),g.kc(6),g.Xb(7,"translate"),g.Lb(),g.Mb(8,"ion-button",12),g.Ub("click",(function(){return g.gc(n),g.Wb(2).showAreYouSureYouWantToLeaveTournament()})),g.kc(9),g.Xb(10,"translate"),g.Lb(),g.Lb(),g.jc(11,k,4,1,"ion-item",13),g.Lb()}if(2&e){var a=g.Wb(2);g.zb(3),g.nc("",g.Yb(4,5,"tournaments.join_with_key"),": ",a.activeTournament.key,""),g.zb(3),g.mc(" ",g.Yb(7,7,"tournaments.share_key")," "),g.zb(3),g.mc(" ",g.Yb(10,9,"tournaments.leave_tournament")," "),g.zb(2),g.cc("ngForOf",a.allPlayerNames)}}function T(e,t){if(1&e){var n=g.Nb();g.Mb(0,"div"),g.Mb(1,"h2",2),g.Ub("click",(function(){return g.gc(n),g.Wb().toggleExpansion()})),g.kc(2),g.Kb(3,"ion-icon",3),g.Lb(),g.jc(4,L,12,11,"ion-card",1),g.Mb(5,"ion-grid"),g.Mb(6,"ion-row"),g.Mb(7,"ion-col"),g.Mb(8,"app-tournament-tile",4),g.Ub("deleteComparisonUserEvent",(function(e){return g.gc(n),g.Wb().deleteComparisonUser(e)}))("openComparisonUserEvent",(function(){return g.gc(n),g.Wb().openPlayerSearchModal()})),g.Xb(9,"translate"),g.Xb(10,"translate"),g.Lb(),g.Lb(),g.Mb(11,"ion-col"),g.Mb(12,"app-tournament-tile",5),g.Ub("deleteComparisonUserEvent",(function(e){return g.gc(n),g.Wb().deleteComparisonUser(e)}))("openComparisonUserEvent",(function(){return g.gc(n),g.Wb().openPlayerSearchModal()})),g.Xb(13,"translate"),g.Xb(14,"translate"),g.Lb(),g.Lb(),g.Mb(15,"ion-col"),g.Mb(16,"app-tournament-tile",6),g.Ub("deleteComparisonUserEvent",(function(e){return g.gc(n),g.Wb().deleteComparisonUser(e)}))("openComparisonUserEvent",(function(){return g.gc(n),g.Wb().openPlayerSearchModal()})),g.Xb(17,"translate"),g.Xb(18,"translate"),g.Lb(),g.Lb(),g.Mb(19,"ion-col"),g.Mb(20,"app-tournament-tile",7),g.Ub("deleteComparisonUserEvent",(function(e){return g.gc(n),g.Wb().deleteComparisonUser(e)}))("openComparisonUserEvent",(function(){return g.gc(n),g.Wb().openPlayerSearchModal()})),g.Xb(21,"translate"),g.Xb(22,"translate"),g.Lb(),g.Lb(),g.Lb(),g.Mb(23,"ion-row"),g.Mb(24,"ion-col"),g.Mb(25,"app-tournament-tile",8),g.Ub("deleteComparisonUserEvent",(function(e){return g.gc(n),g.Wb().deleteComparisonUser(e)}))("openComparisonUserEvent",(function(){return g.gc(n),g.Wb().openPlayerSearchModal()})),g.Xb(26,"translate"),g.Xb(27,"translate"),g.Lb(),g.Lb(),g.Mb(28,"ion-col"),g.Mb(29,"app-tournament-tile",9),g.Ub("deleteComparisonUserEvent",(function(e){return g.gc(n),g.Wb().deleteComparisonUser(e)}))("openComparisonUserEvent",(function(){return g.gc(n),g.Wb().openPlayerSearchModal()})),g.Xb(30,"translate"),g.Xb(31,"translate"),g.Lb(),g.Lb(),g.Mb(32,"ion-col"),g.Mb(33,"app-tournament-tile",10),g.Ub("deleteComparisonUserEvent",(function(e){return g.gc(n),g.Wb().deleteComparisonUser(e)}))("openComparisonUserEvent",(function(){return g.gc(n),g.Wb().openPlayerSearchModal()})),g.Xb(34,"translate"),g.Xb(35,"translate"),g.Lb(),g.Lb(),g.Mb(36,"ion-col"),g.Mb(37,"app-tournament-tile",11),g.Ub("deleteComparisonUserEvent",(function(e){return g.gc(n),g.Wb().deleteComparisonUser(e)}))("openComparisonUserEvent",(function(){return g.gc(n),g.Wb().openPlayerSearchModal()})),g.Xb(38,"translate"),g.Xb(39,"translate"),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Lb()}if(2&e){var a=g.Wb();g.zb(2),g.mc("",a.activeTournament.name," "),g.zb(1),g.cc("ngClass",a.expanded?"expanded":"collapsed"),g.zb(1),g.cc("ngIf",a.expanded),g.zb(4),g.dc("statName",g.Yb(9,43,"statistics.tichuMaster")),g.dc("explanation",g.Yb(10,45,"statistics.explainer_tichuMaster")),g.cc("bestList",a.activeTournamentBestlist)("additionalPlayerNames",a.additionalPlayerNames)("loggedInPlayerName",a.loggedInPlayerName),g.zb(4),g.dc("explanation",g.Yb(13,47,"statistics.explainer_tichuAnnouncedWhen1stRate")),g.dc("statName",g.Yb(14,49,"statistics.tichuAnnouncedWhen1stRate")),g.cc("bestList",a.activeTournamentBestlist)("additionalPlayerNames",a.additionalPlayerNames)("loggedInPlayerName",a.loggedInPlayerName),g.zb(4),g.dc("explanation",g.Yb(17,51,"statistics.explainer_winRate")),g.dc("statName",g.Yb(18,53,"statistics.winRate")),g.cc("bestList",a.activeTournamentBestlist)("additionalPlayerNames",a.additionalPlayerNames)("loggedInPlayerName",a.loggedInPlayerName),g.zb(4),g.dc("explanation",g.Yb(21,55,"statistics.explainer_bombRate")),g.dc("statName",g.Yb(22,57,"statistics.bombRate")),g.cc("bestList",a.activeTournamentBestlist)("additionalPlayerNames",a.additionalPlayerNames)("loggedInPlayerName",a.loggedInPlayerName),g.zb(5),g.dc("statName",g.Yb(26,59,"statistics.doubleWinRate")),g.dc("explanation",g.Yb(27,61,"statistics.explainer_doubleWinRate")),g.cc("bestList",a.activeTournamentBestlist)("additionalPlayerNames",a.additionalPlayerNames)("loggedInPlayerName",a.loggedInPlayerName),g.zb(4),g.dc("explanation",g.Yb(30,63,"statistics.explainer_tichuPreventedRate")),g.dc("statName",g.Yb(31,65,"statistics.tichuPreventedRate")),g.cc("bestList",a.activeTournamentBestlist)("additionalPlayerNames",a.additionalPlayerNames)("loggedInPlayerName",a.loggedInPlayerName),g.zb(4),g.dc("explanation",g.Yb(34,67,"statistics.explainer_tichuSuccessRate")),g.dc("statName",g.Yb(35,69,"statistics.tichuSuccessRate")),g.cc("bestList",a.activeTournamentBestlist)("additionalPlayerNames",a.additionalPlayerNames)("loggedInPlayerName",a.loggedInPlayerName),g.zb(4),g.dc("explanation",g.Yb(38,71,"statistics.explainer_bigTichuSuccessRate")),g.dc("statName",g.Yb(39,73,"statistics.bigTichuSuccessRate")),g.cc("bestList",a.activeTournamentBestlist)("additionalPlayerNames",a.additionalPlayerNames)("loggedInPlayerName",a.loggedInPlayerName)}}function x(e,t){if(1&e){var n=g.Nb();g.Mb(0,"div"),g.Mb(1,"ion-card"),g.Mb(2,"ion-card-header"),g.Kb(3,"img",16),g.Mb(4,"ion-card-title"),g.kc(5),g.Xb(6,"translate"),g.Lb(),g.Mb(7,"p"),g.kc(8),g.Xb(9,"translate"),g.Lb(),g.Mb(10,"ol"),g.Mb(11,"li"),g.kc(12),g.Xb(13,"translate"),g.Lb(),g.Mb(14,"li"),g.kc(15),g.Xb(16,"translate"),g.Lb(),g.Mb(17,"li"),g.kc(18),g.Xb(19,"translate"),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Mb(20,"ion-card"),g.Mb(21,"ion-card-header"),g.Mb(22,"ion-card-title"),g.kc(23),g.Xb(24,"translate"),g.Lb(),g.Lb(),g.Mb(25,"ion-item"),g.Mb(26,"ion-label",17),g.kc(27),g.Xb(28,"translate"),g.Lb(),g.Mb(29,"ion-input",18),g.Ub("ngModelChange",(function(e){return g.gc(n),g.Wb().tourneyKeyToJoin=e})),g.Lb(),g.Lb(),g.Mb(30,"ion-button",12),g.Ub("click",(function(){return g.gc(n),g.Wb().signUpForTournament()})),g.kc(31),g.Xb(32,"translate"),g.Lb(),g.Lb(),g.Mb(33,"ion-card"),g.Mb(34,"ion-card-header"),g.Mb(35,"ion-card-title"),g.kc(36),g.Xb(37,"translate"),g.Lb(),g.Lb(),g.Mb(38,"ion-item"),g.Mb(39,"ion-label",19),g.kc(40),g.Xb(41,"translate"),g.Lb(),g.Mb(42,"ion-input",20),g.Ub("ngModelChange",(function(e){return g.gc(n),g.Wb().tourneyNameToCreate=e})),g.Lb(),g.Lb(),g.Mb(43,"ion-button",12),g.Ub("click",(function(){return g.gc(n),g.Wb().createNewTournament()})),g.kc(44),g.Xb(45,"translate"),g.Lb(),g.Lb(),g.Lb()}if(2&e){var a=g.Wb();g.zb(3),g.dc("src","../../assets/icon/tournament.svg",g.hc),g.zb(2),g.lc(g.Yb(6,14,"tournaments.title")),g.zb(3),g.lc(g.Yb(9,16,"tournaments.explainer_0")),g.zb(4),g.lc(g.Yb(13,18,"tournaments.explainer_1")),g.zb(3),g.lc(g.Yb(16,20,"tournaments.explainer_2")),g.zb(3),g.lc(g.Yb(19,22,"tournaments.explainer_3")),g.zb(5),g.lc(g.Yb(24,24,"tournaments.sign_up")),g.zb(4),g.lc(g.Yb(28,26,"tournaments.tournament_password")),g.zb(2),g.cc("ngModel",a.tourneyKeyToJoin),g.zb(2),g.mc(" ",g.Yb(32,28,"tournaments.register")," "),g.zb(5),g.lc(g.Yb(37,30,"tournaments.create_new")),g.zb(4),g.mc("",g.Yb(41,32,"tournaments.tournament_name")," "),g.zb(2),g.cc("ngModel",a.tourneyNameToCreate),g.zb(2),g.mc(" ",g.Yb(45,34,"tournaments.create")," ")}}var w,U,_,I=p.b.Share,O=[{path:"",component:(w=function(){function e(t,n,a,o,r,i,c,l){var b=this;_classCallCheck(this,e),this.router=t,this.translator=n,this.alertController=a,this.modalController=o,this.translateService=r,this.toastService=i,this.httpClient=c,this.toastController=l,this.activeTournament=null,this.activeTournamentBestlist=null,this.tourneyKeyToJoin=null,this.tourneyNameToCreate=null,this.additionalPlayerNames=[],this.dataIsRefreshing=!0,this.expanded=!1,this.router.events.subscribe((function(e){e instanceof s.c&&"/tabs/tournaments"===e.url&&(b.dataIsRefreshing=!0,b.refreshActiveTournament())}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.APIgetLoggedInUser().subscribe((function(t){e.loggedInPlayerName=t.name}))}},{key:"refreshActiveTournament",value:function(){var e=this;this.activeTournament=null,this.activeTournamentBestlist=null,this.APIgetActiveTournament().subscribe((function(t){t.noActiveTournaments||(e.activeTournament=t,e.APIGetTournamentBestlist(t.key).subscribe((function(t){e.activeTournamentBestlist=t,e.allPlayerNames=e.getAllPlayerNamesFromBestlist(t),e.allPlayerNames.sort(),e.dataIsRefreshing=!1}))),t.noActiveTournaments&&(e.dataIsRefreshing=!1)}))}},{key:"shareTournamentKey",value:function(){p.a.isPluginAvailable("Share")&&I.share({title:"Share the tournament key",text:this.activeTournament.key,dialogTitle:"Share the key"})}},{key:"signUpForTournament",value:function(){var e=this;console.log("signup started"),this.APIsignUpForTournament(this.tourneyKeyToJoin).subscribe((function(t){e.activeTournament=t,e.refreshActiveTournament()}))}},{key:"toggleExpansion",value:function(){this.expanded=!this.expanded}},{key:"getAllPlayerNamesFromBestlist",value:function(e){var t=[];return e.elo.forEach((function(e){t.push(e.name)})),t}},{key:"createNewTournament",value:function(){var e=this;this.tourneyNameToCreate||this.toastService.presentToast(this.translateService.instant("tournaments.toast_no_name_error")),this.APIcreateNewTournament(this.tourneyNameToCreate).subscribe((function(t){console.log(t),e.tourneyKeyToJoin=t.key,e.signUpForTournament()}))}},{key:"deleteComparisonUser",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=this.additionalPlayerNames.indexOf(e))>-1&&(this.additionalPlayerNames.splice(n,1),this.additionalPlayerNames=this.additionalPlayerNames.slice());case 2:case"end":return t.stop()}}),t,this)})))}},{key:"openPlayerSearchModal",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({componentProps:{allPlayerNames:this.allPlayerNames},component:d.a,cssClass:"auto-height bottom-sheet",showBackdrop:!0,mode:"ios"});case 2:return(t=e.sent).onDidDismiss().then((function(e){n.additionalPlayerNames.push(e.data),n.additionalPlayerNames=n.additionalPlayerNames.slice()})),e.next=6,t.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"showAreYouSureYouWantToLeaveTournament",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:this.translateService.instant("tournaments.leave_tournament_header"),message:this.translateService.instant("tournaments.leave_tournament_message"),buttons:[{text:this.translator.instant("tournaments.back"),role:"cancel",cssClass:"secondary",handler:function(e){}},{text:this.translator.instant("tournaments.leave"),handler:function(){n.APIremoveFromCurrentTournament().subscribe((function(){n.refreshActiveTournament()}))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"APIGetTournamentBestlist",value:function(e){var t=this;return this.httpClient.get("".concat(b.a,"/tournament/tournamentBestList/").concat(e)).pipe(Object(u.a)((function(e){return t.toastService.presentToast(),Object(l.a)(e)})))}},{key:"APIremoveFromCurrentTournament",value:function(){var e=this;return this.httpClient.post(b.a+"/tournament/removeLoggedInUser",{key:this.activeTournament.key}).pipe(Object(u.a)((function(t){return e.toastService.presentToast(),Object(l.a)(t)})))}},{key:"APIcreateNewTournament",value:function(e){var t=this;return this.httpClient.post(b.a+"/tournament/create",{name:e,isOfficial:!1,isActive:!0}).pipe(Object(u.a)((function(e){return t.toastService.presentToast(),Object(l.a)(e)})))}},{key:"APIgetLoggedInUser",value:function(){var e=this;return this.httpClient.get(b.a+"/users/loggedInUser").pipe(Object(u.a)((function(t){return e.toastService.presentToast(),Object(l.a)(t)})))}},{key:"APIsignUpForTournament",value:function(e){var t=this;return this.httpClient.post(b.a+"/tournament/addLoggedInUser",{key:e}).pipe(Object(u.a)((function(e){return t.toastService.presentToast(t.translator.instant("tournaments.error_could_not_joing")),Object(l.a)(e)})))}},{key:"APIgetActiveTournament",value:function(){var e=this;return this.httpClient.get(b.a+"/tournament/active").pipe(Object(u.a)((function(t){return e.toastService.presentToast(),Object(l.a)(t)})))}}]),e}(),w.\u0275fac=function(e){return new(e||w)(g.Jb(s.h),g.Jb(r.d),g.Jb(i.a),g.Jb(i.A),g.Jb(r.d),g.Jb(m.a),g.Jb(h.b),g.Jb(i.F))},w.\u0275cmp=g.Db({type:w,selectors:[["app-tournaments"]],decls:4,vars:2,consts:[[1,"top-spacer"],[4,"ngIf"],[3,"click"],["name","triangle-outline",3,"ngClass"],["propertyName","tichuMaster","showPercentage","",3,"statName","bestList","additionalPlayerNames","loggedInPlayerName","explanation","deleteComparisonUserEvent","openComparisonUserEvent"],["propertyName","tichuAnnouncedWhen1stRate","showPercentage","%",3,"bestList","additionalPlayerNames","loggedInPlayerName","explanation","statName","deleteComparisonUserEvent","openComparisonUserEvent"],["showPercentage","%","propertyName","winRate",3,"bestList","additionalPlayerNames","loggedInPlayerName","explanation","statName","deleteComparisonUserEvent","openComparisonUserEvent"],["showPercentage","%","propertyName","bombRate",3,"bestList","additionalPlayerNames","loggedInPlayerName","explanation","statName","deleteComparisonUserEvent","openComparisonUserEvent"],["showPercentage","%","propertyName","doubleWinRate",3,"bestList","additionalPlayerNames","loggedInPlayerName","statName","explanation","deleteComparisonUserEvent","openComparisonUserEvent"],["showPercentage","%","propertyName","tichuPreventedRate",3,"bestList","additionalPlayerNames","loggedInPlayerName","explanation","statName","deleteComparisonUserEvent","openComparisonUserEvent"],["showPercentage","%","propertyName","tichuSuccessRate",3,"bestList","additionalPlayerNames","loggedInPlayerName","explanation","statName","deleteComparisonUserEvent","openComparisonUserEvent"],["showPercentage","%","propertyName","bigTichuSuccessRate",3,"bestList","additionalPlayerNames","loggedInPlayerName","explanation","statName","deleteComparisonUserEvent","openComparisonUserEvent"],["expand","block","fill","clear","color","primary",3,"click"],["detail","false","button","",4,"ngFor","ngForOf"],["detail","false","button",""],["tabindex","0"],["alt","",1,"trophy",3,"src"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["position","floating",1,"floating-label"],["maxlength","20","type","text",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.Mb(0,"ion-content"),g.Kb(1,"div",0),g.jc(2,T,40,75,"div",1),g.jc(3,x,46,36,"div",1),g.Lb()),2&e&&(g.zb(2),g.cc("ngIf",t.activeTournament&&!t.dataIsRefreshing),g.zb(1),g.cc("ngIf",!t.activeTournament&&!t.dataIsRefreshing))},directives:[i.j,a.j,i.l,a.h,i.k,i.s,i.i,N,i.e,i.g,i.h,i.d,a.i,i.n,i.o,i.m,i.E,o.e,o.f,o.b],pipes:[r.c],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-background) url(dogs.7092f7cc69613632b137.png) top center/cover no-repeat}img[_ngcontent-%COMP%]{width:30%;display:block;margin-left:auto;margin-right:auto}.trophy[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}h2[_ngcontent-%COMP%]{margin:0 0 0 5%}h2[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:relative;vertical-align:center!important}ion-icon[_ngcontent-%COMP%]{top:.3rem}p[_ngcontent-%COMP%]{color:#000}.collapsed[_ngcontent-%COMP%]{display:inline-block;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.expanded[_ngcontent-%COMP%]{display:inline-block;-webkit-transform:rotate(180deg);transform:rotate(180deg)}ion-card-title[_ngcontent-%COMP%]{color:#000;font-size:1.2rem!important;font-weight:400;text-align:center}ion-label[_ngcontent-%COMP%]{font-size:1rem!important}ion-list-header[_ngcontent-%COMP%]{color:#000;font-size:1.2rem!important;font-weight:400}ol[_ngcontent-%COMP%]{margin-left:5%;margin-right:2%}li[_ngcontent-%COMP%], ol[_ngcontent-%COMP%]{color:#000;-webkit-padding-start:0;padding-inline-start:0;text-align:justify}"]}),w)},{path:"tournament-player-search-modal",loadChildren:function(){return Promise.resolve().then(n.bind(null,"qyCJ")).then((function(e){return e.TournamentPlayerSearchModalPageModule}))}}],z=((U=function e(){_classCallCheck(this,e)}).\u0275mod=g.Hb({type:U}),U.\u0275inj=g.Gb({factory:function(e){return new(e||U)},imports:[[s.j.forChild(O)],s.j]}),U),E=n("qyCJ"),S=((_=function e(){_classCallCheck(this,e)}).\u0275mod=g.Hb({type:_}),_.\u0275inj=g.Gb({factory:function(e){return new(e||_)},imports:[[a.b,o.a,i.y,z,r.b.forChild(),E.TournamentPlayerSearchModalPageModule]]}),_)},q7q9:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a,o=n("mrSG"),r=n("TEn/"),i=n("fXoL"),s=n("3Pt+"),c=n("ofXK"),l=((a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t){return e?t?(t=t.toLowerCase(),e.filter((function(e){return e.toLowerCase().includes(t)}))):e:[]}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275pipe=i.Ib({name:"filter",type:a,pure:!0}),a);function b(e,t){if(1&e){var n=i.Nb();i.Mb(0,"ion-item",3),i.Ub("click",(function(){i.gc(n);var e=t.$implicit;return i.Wb().addToSelectedUsersAndClose(e)})),i.Kb(1,"div",4),i.Mb(2,"ion-label"),i.kc(3),i.Lb(),i.Lb()}if(2&e){var a=t.$implicit;i.zb(3),i.mc(" ",a," ")}}var u,m=((u=function(){function e(t){_classCallCheck(this,e),this.modalController=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;setTimeout((function(){e.searchbar.setFocus()}),1e3)}},{key:"addToSelectedUsersAndClose",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.additionalPlayerName=e,t.next=3,this.modalController.dismiss(this.additionalPlayerName);case 3:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||u)(i.Jb(r.A))},u.\u0275cmp=i.Db({type:u,selectors:[["app-tournament-player-search-modal"]],viewQuery:function(e,t){var n;1&e&&i.oc(r.t,!0),2&e&&i.fc(n=i.Vb())&&(t.searchbar=n.first)},inputs:{allPlayerNames:"allPlayerNames"},decls:5,vars:5,consts:[[1,"inner-content"],["placeholder","Search to Compare",3,"ngModel","ngModelChange"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["tabindex","0"]],template:function(e,t){1&e&&(i.Mb(0,"div",0),i.Mb(1,"ion-searchbar",1),i.Ub("ngModelChange",(function(e){return t.searchText=e})),i.Lb(),i.Mb(2,"ion-list"),i.jc(3,b,4,1,"ion-item",2),i.Xb(4,"filter"),i.Lb(),i.Lb()),2&e&&(i.zb(1),i.cc("ngModel",t.searchText),i.zb(2),i.cc("ngForOf",i.Zb(4,2,t.allPlayerNames,t.searchText)))},directives:[r.t,r.E,s.e,s.f,r.p,c.i,r.n,r.o],pipes:[l],styles:[""]}),u)},qyCJ:function(e,t,n){"use strict";n.r(t),n.d(t,"TournamentPlayerSearchModalPageModule",(function(){return d}));var a,o,r=n("ofXK"),i=n("3Pt+"),s=n("TEn/"),c=n("tyNb"),l=n("q7q9"),b=n("fXoL"),u=[{path:"",component:l.a}],m=((o=function e(){_classCallCheck(this,e)}).\u0275mod=b.Hb({type:o}),o.\u0275inj=b.Gb({factory:function(e){return new(e||o)},imports:[[c.j.forChild(u)],c.j]}),o),d=((a=function e(){_classCallCheck(this,e)}).\u0275mod=b.Hb({type:a}),a.\u0275inj=b.Gb({factory:function(e){return new(e||a)},imports:[[r.b,i.a,s.y,m]]}),a)},t4lL:function(e,t){}}]);